/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={220:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,":root {\n  --main-bg-color: white;\n  --nav-bg-color: #2bc1ff;\n  --background-blue-alternate: rgba(51, 167, 255, 0.5);\n  --nav-text-color: #fff;\n  --text-color: #364958;\n  --text-shadow-large: 2px 4px 3px rgba(0, 0, 0, 0.3);\n  --text-shadow-small: 1px 2px 2px rgba(0, 0, 0, 0.1);\n  --border-color: #bfbfbf;\n  --item-bg-color: #eaeaea;\n  --button-bg-color: #35ce8d;\n  --button-text-color: #fff;\n  --button-hover-bg-color: #fb3640;\n  --button-shadow: rgba(50, 50, 93, 0.25) 0px 6px 12px -2px,\n    rgba(0, 0, 0, 0.3) 0px 3px 7px -3px;\n  --drawer-shadow: rgba(50, 50, 93, 0.25) 0px 25px 25px 6px,\n    rgba(0, 0, 0, 0.5) 0px 3px 4px 1px;\n  --heading-font-family: 'Urbanist', sans-serif;\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--main-bg-color);\n  font-family: sans-serif;\n}\n\n/* container for the add button and modal structure */\n.container {\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n  padding-left: 6rem;\n  padding-right: 6rem;\n  margin-top: 4rem; /* Gives space so the items in the main screen aren't behind the nav */\n}\n\n@media (max-width: 600px) {\n  .container {\n    padding-left: 2rem;\n    padding-right: 2rem;\n  }\n}\n\n/* ICONS */\n.arrow-up {\n  width: 12px;\n  height: 12px;\n  border: 3px solid var(--nav-bg-color);\n  border-left: 0;\n  border-top: 0;\n  transform: rotate(225deg);\n  align-self: center;\n  margin-top: 0.2rem;\n}\n\n.arrow-down {\n  width: 12px;\n  height: 12px;\n  border: 3px solid var(--nav-bg-color);\n  border-left: 0;\n  border-top: 0;\n\n  transform: rotate(45deg);\n}\n\n.plus {\n  --b: 4px; /* thickness*/\n  --c: #fff 90deg, var(--nav-bg-color) 0; /* coloration */\n  border: 5px solid #fff;\n  border-radius: 50%;\n  width: 25px; /* size */\n  aspect-ratio: 1;\n  background: conic-gradient(from 90deg at var(--b) var(--b), var(--c))\n    calc(100% + var(--b) / 2) calc(100% + var(--b) / 2) / calc(50% + var(--b))\n    calc(50% + var(--b));\n}\n",""]);const u=a},694:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,".formActionsDiv {\n  width: 100%;\n  display: flex;\n  gap: 2rem;\n  justify-content: center;\n  padding-top: 2rem;\n}\n\nbutton {\n  border: none;\n  border-radius: 8px;\n  color: var(--button-text-color);\n  padding: 1rem;\n  font-size: 20px;\n  font-weight: 600;\n  box-shadow: var(--button-shadow);\n  font-family: var(--heading-font-family);\n}\n\nbutton:active {\n  box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset,\n    rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;\n}\n\n#openModalButton {\n  display: flex;\n  justify-content: center;\n  gap: 0.5rem;\n  background: var(--nav-bg-color);\n  font-family: var(--heading-font-family);\n  width: auto;\n}\n\n#openOptionsModalButton {\n  background: #004385;\n  font-size: 16px;\n}\n\n.downloadDataButton {\n  width: 100%;\n  color: #fff;\n  background: #004385;\n  box-shadow: var(--button-shadow), #023568 0 -12px 6px inset;\n}\n\n@media (max-width: 600px) {\n  #openModalButton {\n    width: 100%;\n  }\n}\n\n#addItemButton {\n  background: var(--button-bg-color);\n}\n\n#cancelButton,\n#closeOptionsModal {\n  color: #fff;\n  background: var(--button-hover-bg-color);\n}\n",""]);const u=a},503:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,"#itemForm {\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n}\n\n#itemForm label {\n  display: block;\n  margin-bottom: 1rem;\n  font-size: 20px;\n}\n\n#itemForm input,\nselect {\n  display: block;\n  height: 2.5rem;\n  font-size: 20px;\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  margin-top: 0.5rem;\n  width: 100%;\n}\n\n.formInputGroup {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n}\n\n#itemForm input:invalid {\n  outline: 1px solid var(--button-hover-bg-color);\n}\n\n#itemForm input:focus-visible {\n  outline: 1px solid var(--nav-bg-color);\n}\n\n#itemForm select:focus-visible {\n  outline: 1px solid var(--nav-bg-color);\n}\n\n#quantityInput,\n#priceInput {\n  width: 3rem;\n}\n\n.error {\n  font-size: 16px;\n  font-style: italic;\n  letter-spacing: 0.03rem;\n  line-height: 2rem;\n  color: var(--button-hover-bg-color);\n}\n",""]);const u=a},277:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,".noItemsMessage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  font-size: 16px;\n  font-style: italic;\n  color: #999999;\n}\n\n#itemsDiv {\n  margin-bottom: 20rem; /* spacing so items dont get lost under sticky footer*/\n}\n\n.item {\n  display: grid;\n  grid-template-columns: min-content 2fr 1fr;\n  border-bottom: 1px solid #cdcccb;\n  background: var(--item-bg-color);\n  margin-bottom: 0.5rem;\n  font-size: 20px;\n  width: 85%;\n  margin: 0 auto;\n}\n\n.checkbox {\n  height: 100%;\n  width: 2rem;\n  margin-left: 0.5rem;\n}\n\n/* container for an item in the rendered shopping list */\n.itemInfo {\n  display: grid;\n  grid-template-areas:\n    'name name'\n    'quantity price';\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr min-content;\n  gap: 0.7rem;\n  padding-left: 1rem;\n  color: var(--text-color);\n  padding-top: 0.5rem;\n  padding-bottom: 0.2rem;\n}\n\n.itemInfoHeading {\n  font-size: 14px;\n  font-style: italic;\n  letter-spacing: 0.05rem;\n}\n\n.storeSection {\n  text-align: right;\n}\n\n.itemNameContainer {\n  grid-area: name;\n  font-size: 22px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n\n.itemNameText {\n  font-family: var(--heading-font-family);\n  font-weight: 700;\n  font-size: 24px;\n}\n\n.itemQuantityContainer {\n  grid-area: quantity;\n}\n\n.itemQuantityText {\n  font-weight: 600;\n  font-size: 18px;\n}\n\n.itemPriceContainer {\n  grid-area: price;\n}\n\n.itemPriceText {\n  font-size: 16px;\n}\n\n.deleteButton {\n  margin: 0 0 0 auto;\n  background: var(--button-hover-bg-color);\n  color: var(--button-text-color);\n  font-size: 0.8rem;\n  width: 4rem;\n  border-radius: 0px;\n}\n\n.deleteButton:active {\n  margin-top: 3px;\n}\n\n.purchased {\n  background: #878e88;\n  color: #fff;\n}\n\n.purchased .itemNameText {\n  text-decoration: line-through;\n}\n\n.divider {\n  border-top: 1px solid var(--nav-bg-color);\n  margin-left: 2rem;\n  margin-right: 2rem;\n}\n\n#toggleMessage {\n  font-size: 16px;\n  font-family: var(--heading-font-family);\n}\n\n/* bubbles at the bottom to quick sort the list */\n.closed {\n  display: none;\n}\n\n.stickyQuickSortFooter {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  background: white;\n  z-index: 1;\n  overflow-x: auto;\n  overflow-y: hidden;\n  white-space: nowrap; /* Prevents items from wrapping */\n  box-shadow: var(--drawer-shadow);\n}\n\n#quickSortDiv {\n  display: inline-flex; /* inline-flex to respect the white-space property */\n  gap: 1.6rem;\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n  margin: 0 auto;\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n\n#quickSortWrapper {\n  text-align: center;\n}\n\n.itemGroupContainer {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  font-family: var(--heading-font-family);\n  color: var(--text-color);\n  font-size: large;\n  font-weight: 600;\n  white-space: nowrap; /* Ensure items do not wrap */\n}\n\n.itemGroup {\n  background: var(--nav-bg-color);\n  display: flex;\n  gap: 0.2rem;\n  justify-content: center;\n  font-size: medium;\n  align-items: center;\n  color: white;\n  border-radius: 100%;\n  height: 60px;\n  width: 60px;\n  box-shadow: var(--button-shadow);\n}\n\n.completed {\n  background-color: var(--button-bg-color);\n}\n\n.selected {\n  outline: 3px dashed var(--nav-bg-color);\n}\n",""]);const u=a},902:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,".modal {\n  display: none;\n  position: fixed;\n  z-index: 3;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.modal-content {\n  background-color: #fefefe;\n  margin: 15% auto;\n  padding: 2rem;\n  padding-bottom: 0.5rem;\n  border: 1px solid #888;\n  width: 90%;\n  border-radius: 8px;\n}\n\n@media (max-width: 600px) {\n  .modal-content {\n    margin: 25% auto;\n  }\n}\n\n.close {\n  background: none;\n  border: none;\n  color: #aaa;\n  float: right;\n  font-size: 20px;\n  font-weight: bold;\n}\n\n.close:hover,\n.close:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n[aria-hidden='true'] {\n  display: none;\n}\n\n.inert {\n  user-select: none;\n}\n\n#modalTitle {\n  font-family: var(--heading-font-family);\n  padding-top: 1rem;\n  font-size: 24px;\n  text-shadow: 1px 2px 2px rgba(0, 0, 0, 0.1);\n}\n",""]);const u=a},782:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,"nav {\n  background: var(--nav-bg-color);\n  letter-spacing: 0.2rem;\n  line-height: 3rem;\n  color: var(--nav-text-color);\n  padding-left: 2rem;\n  padding-right: 2rem;\n  padding-top: 0.7rem;\n  padding-bottom: 0.7rem;\n  font-family: var(--heading-font-family);\n  font-size: 24px;\n  font-weight: 800;\n  text-shadow: var(--text-shadow-large);\n  box-shadow: var(--button-shadow);\n  position: fixed;\n  top: 0;\n  width: 100%;\n}\n\n.navContents {\n  display: flex;\n  justify-content: space-between;\n}\n",""]);const u=a},108:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,".optionsModal {\n  height: 100%;\n  width: 0; /* TOGGLE SIZE IN JS */\n  max-width: 300px;\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #fefefe;\n  box-shadow: var(--button-shadow);\n  overflow-x: hidden; /* Disable horizontal scroll */\n  transition: 0.5s;\n}\n\n.filterInputs {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.filterControl {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n\n.controlText {\n  font-size: 18px;\n  text-align: right;\n  font-family: var(--heading-font-family);\n  color: var(--text-color);\n  font-weight: 600;\n  width: 50%;\n}\n\n.optionsModalTitleContainer {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  color: #fff;\n  background: #364958;\n  box-shadow: var(--button-shadow);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.optionsModalFooter {\n  padding: 1rem;\n}\n\n.optionsModalTitle {\n  font-family: var(--heading-font-family);\n  font-size: 24px;\n  font-weight: 600;\n  letter-spacing: 0.12rem;\n  text-shadow: 1px 2px 2px rgba(0, 0, 0, 0.1);\n}\n\n.filterControl {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.3rem;\n}\n",""]);const u=a},105:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,".switch {\n  position: relative;\n  width: 65px;\n  height: 30px;\n  padding: 3px;\n  background-color: white;\n  border-radius: 18px;\n  box-shadow: inset 0 -1px white, inset 0 1px 1px rgba(0, 0, 0, 0.05);\n  cursor: pointer;\n  background-image: -webkit-linear-gradient(top, #eeeeee, white 25px);\n  background-image: -moz-linear-gradient(top, #eeeeee, white 25px);\n  background-image: -o-linear-gradient(top, #eeeeee, white 25px);\n  background-image: linear-gradient(to bottom, #eeeeee, white 25px);\n}\n\n.switch-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0;\n}\n\n.switch-label {\n  position: relative;\n  display: block;\n  height: inherit;\n  font-size: 10px;\n  text-transform: uppercase;\n  background: #eceeef;\n  border-radius: inherit;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.12),\n    inset 0 0 2px rgba(0, 0, 0, 0.15);\n  -webkit-transition: 0.15s ease-out;\n  -moz-transition: 0.15s ease-out;\n  -o-transition: 0.15s ease-out;\n  transition: 0.15s ease-out;\n  -webkit-transition-property: opacity background;\n  -moz-transition-property: opacity background;\n  -o-transition-property: opacity background;\n  transition-property: opacity background;\n}\n.switch-label:before,\n.switch-label:after {\n  position: absolute;\n  top: 50%;\n  margin-top: -0.5em;\n  line-height: 1;\n  -webkit-transition: inherit;\n  -moz-transition: inherit;\n  -o-transition: inherit;\n  transition: inherit;\n}\n.switch-label:before {\n  content: attr(data-off);\n  right: 11px;\n  color: #aaa;\n  text-shadow: 0 1px rgba(255, 255, 255, 0.5);\n}\n.switch-label:after {\n  content: attr(data-on);\n  left: 11px;\n  color: white;\n  text-shadow: 0 1px rgba(0, 0, 0, 0.2);\n  opacity: 0;\n}\n.switch-input:checked ~ .switch-label {\n  background: var(--nav-bg-color);\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15),\n    inset 0 0 3px rgba(0, 0, 0, 0.2);\n}\n.switch-input:checked ~ .switch-label:before {\n  opacity: 0;\n}\n.switch-input:checked ~ .switch-label:after {\n  opacity: 1;\n}\n\n.switch-handle {\n  position: absolute;\n  top: 4px;\n  left: 2px;\n  width: 25px;\n  height: 28px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);\n  background-image: -webkit-linear-gradient(top, white 40%, #f0f0f0);\n  background-image: -moz-linear-gradient(top, white 40%, #f0f0f0);\n  background-image: -o-linear-gradient(top, white 40%, #f0f0f0);\n  background-image: linear-gradient(to bottom, white 40%, #f0f0f0);\n  -webkit-transition: left 0.15s ease-out;\n  -moz-transition: left 0.15s ease-out;\n  -o-transition: left 0.15s ease-out;\n  transition: left 0.15s ease-out;\n}\n.switch-handle:before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -6px 0 0 -6px;\n  width: 12px;\n  height: 12px;\n  background: #f9f9f9;\n  border-radius: 6px;\n  box-shadow: inset 0 1px rgba(0, 0, 0, 0.02);\n  background-image: -webkit-linear-gradient(top, #eeeeee, white);\n  background-image: -moz-linear-gradient(top, #eeeeee, white);\n  background-image: -o-linear-gradient(top, #eeeeee, white);\n  background-image: linear-gradient(to bottom, #eeeeee, white);\n}\n.switch-input:checked ~ .switch-handle {\n  left: 37px;\n  box-shadow: -1px 1px 5px rgba(0, 0, 0, 0.2);\n}\n\n.switch-green > .switch-input:checked ~ .switch-label {\n  background: #4fb845;\n}\n",""]);const u=a},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var u=0;u<this.length;u++){var c=this[u][0];null!=c&&(a[c]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},744:function(t,e,n){t.exports=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function r(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,i=Object.keys,a=Array.isArray;function u(t,e){return"object"!=typeof e||i(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,s={}.hasOwnProperty;function l(t,e){return s.call(t,e)}function f(t,e){"function"==typeof e&&(e=e(c(t))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(e).forEach((function(n){d(t,n,e[n])}))}var h=Object.defineProperty;function d(t,e,n,r){h(t,e,u(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),d(t.prototype,"constructor",t),{extend:f.bind(null,t.prototype)}}}}var y=Object.getOwnPropertyDescriptor,v=[].slice;function m(t,e,n){return v.call(t,e,n)}function g(t,e){return e(t)}function b(t){if(!t)throw new Error("Assertion Failed")}function w(t){o.setImmediate?setImmediate(t):setTimeout(t,0)}function x(t,e){if("string"==typeof e&&l(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,o=e.length;r<o;++r){var i=x(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(-1!==a){var u=t[e.substr(0,a)];return null==u?void 0:x(u,e.substr(a+1))}}function _(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){b("string"!=typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)_(t,e[r],n[r])}else{var i,u,c=e.indexOf(".");-1!==c?(i=e.substr(0,c),""===(u=e.substr(c+1))?void 0===n?a(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=n:_(c=(c=t[i])&&l(t,i)?c:t[i]={},u,n)):void 0===n?a(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function k(t){var e,n={};for(e in t)l(t,e)&&(n[e]=t[e]);return n}var E=[].concat;function O(t){return E.apply([],t)}var P="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return o[t]})),S=new Set(P.map((function(t){return o[t]}))),j=null;function A(t){return j=new WeakMap,t=function t(e){if(!e||"object"!=typeof e)return e;var n=j.get(e);if(n)return n;if(a(e)){n=[],j.set(e,n);for(var r=0,o=e.length;r<o;++r)n.push(t(e[r]))}else if(S.has(e.constructor))n=e;else{var i,u=c(e);for(i in n=u===Object.prototype?{}:Object.create(u),j.set(e,n),e)l(e,i)&&(n[i]=t(e[i]))}return n}(t),j=null,t}var L={}.toString;function I(t){return L.call(t).slice(8,-1)}var T="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",C="symbol"==typeof T?function(t){var e;return null!=t&&(e=t[T])&&e.apply(t)}:function(){return null};function K(t,e){return 0<=(e=t.indexOf(e))&&t.splice(e,1),0<=e}var B={};function D(t){var e,n,r,o;if(1===arguments.length){if(a(t))return t.slice();if(this===B&&"string"==typeof t)return[t];if(o=C(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"!=typeof(e=t.length))return[t];for(n=new Array(e);e--;)n[e]=t[e];return n}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var q="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},N=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function M(t,e){this.name=t,this.message=e}function R(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}function z(t,e,n,r){this.failures=e,this.failedKeys=r,this.successCount=n,this.message=R(t,e)}function G(t,e){this.name="BulkError",this.failures=Object.keys(e).map((function(t){return e[t]})),this.failuresByPos=e,this.message=R(t,this.failures)}p(M).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(z).from(M),p(G).from(M);var U=N.reduce((function(t,e){return t[e]=e+"Error",t}),{}),V=M,Y=N.reduce((function(t,e){var n=e+"Error";function r(t,r){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=F[e]||n,this.inner=null)}return p(r).from(V),t[e]=r,t}),{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var H=ct.reduce((function(t,e){return t[e+"Error"]=Y[e],t}),{}),Q=N.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Y[e]),t}),{});function W(){}function $(t){return t}function X(t,e){return null==t||t===$?e:function(n){return e(t(n))}}function J(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Z(t,e){return t===W?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?J(r,this.onsuccess):r),o&&(this.onerror=this.onerror?J(o,this.onerror):o),void 0!==i?i:n}}function tt(t,e){return t===W?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?J(n,this.onsuccess):n),r&&(this.onerror=this.onerror?J(r,this.onerror):r)}}function et(t,e){return t===W?e:function(n){var r=t.apply(this,arguments);u(n,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,n=e.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?J(o,this.onsuccess):o),i&&(this.onerror=this.onerror?J(i,this.onerror):i),void 0===r?void 0===n?void 0:n:u(r,n)}}function nt(t,e){return t===W?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function rt(t,e){return t===W?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return e.apply(r,i)}))}return e.apply(this,arguments)}}Q.ModifyError=z,Q.DexieError=M,Q.BulkError=G;var ot="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function it(t){ot=t}var at={},ut=100,ct=(P="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,c(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,c(e),t]}(),P[0]),st=(N=P[1],P=P[2],N=N&&N.then,ct&&ct.constructor),lt=!!P,ft=function(t,e){bt.push([t,e]),dt&&(queueMicrotask(At),dt=!1)},ht=!0,dt=!0,pt=[],yt=[],vt=$,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:W,pgp:!1,env:{},finalize:W},gt=mt,bt=[],wt=0,xt=[];function _t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=gt;if("function"!=typeof t){if(t!==at)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ot(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,n){try{n((function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Lt();n&&"function"==typeof n.then?t(e,(function(t,e){n instanceof _t?n._then(t,e):n.then(t,e)})):(e._state=!0,e._value=n,Pt(e)),r&&It()}}),Ot.bind(null,e))}catch(n){Ot(e,n)}}(this,t)}var kt={get:function(){var t=gt,e=Ft;function n(n,r){var o=this,i=!t.global&&(t!==gt||e!==Ft),a=i&&!Gt(),u=new _t((function(e,u){St(o,new Et(Wt(n,t,i,a),Wt(r,t,i,a),e,u,t))}));return this._consoleTask&&(u._consoleTask=this._consoleTask),u}return n.prototype=at,n},set:function(t){d(this,"then",t&&t.prototype===at?kt:{get:function(){return t},set:kt.set})}};function Et(t,e,n,r,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function Ot(t,e){var n,r;yt.push(e),null===t._state&&(n=t._lib&&Lt(),e=vt(e),t._state=!1,t._value=e,r=t,pt.some((function(t){return t._value===r._value}))||pt.push(r),Pt(t),n&&It())}function Pt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)St(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===wt&&(++wt,ft((function(){0==--wt&&Tt()}),[]))}function St(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++wt,ft(jt,[n,t,e])}else t._listeners.push(e)}function jt(t,e,n){try{var r,o=e._value;!e._state&&yt.length&&(yt=[]),r=ot&&e._consoleTask?e._consoleTask.run((function(){return t(o)})):t(o),e._state||-1!==yt.indexOf(o)||function(t){for(var e=pt.length;e;)if(pt[--e]._value===t._value)return pt.splice(e,1)}(e),n.resolve(r)}catch(t){n.reject(t)}finally{0==--wt&&Tt(),--n.psd.ref||n.psd.finalize()}}function At(){Qt(mt,(function(){Lt()&&It()}))}function Lt(){var t=ht;return dt=ht=!1,t}function It(){var t,e,n;do{for(;0<bt.length;)for(t=bt,bt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(0<bt.length);dt=ht=!0}function Tt(){var t=pt;pt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=xt.slice(0),n=e.length;n;)e[--n]()}function Ct(t){return new _t(at,!1,t)}function Kt(t,e){var n=gt;return function(){var r=Lt(),o=gt;try{return Yt(n,!0),t.apply(this,arguments)}catch(r){e&&e(r)}finally{Yt(o,!1),r&&It()}}}f(_t.prototype,{then:kt,_then:function(t,e){St(this,new Et(null,null,t,e,gt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=t,n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return(t instanceof e?n:Ct)(t)})):this.then(null,(function(t){return(t&&t.name===e?n:Ct)(t)}))},finally:function(t){return this.then((function(e){return _t.resolve(t()).then((function(){return e}))}),(function(e){return _t.resolve(t()).then((function(){return Ct(e)}))}))},timeout:function(t,e){var n=this;return t<1/0?new _t((function(r,o){var i=setTimeout((function(){return o(new Y.Timeout(e))}),t);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(_t.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=Ht(),f(_t,{all:function(){var t=D.apply(null,arguments).map(Ut);return new _t((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(o,i){return _t.resolve(o).then((function(n){t[i]=n,--r||e(t)}),n)}))}))},resolve:function(t){return t instanceof _t?t:t&&"function"==typeof t.then?new _t((function(e,n){t.then(e,n)})):new _t(at,!0,t)},reject:Ct,race:function(){var t=D.apply(null,arguments).map(Ut);return new _t((function(e,n){t.map((function(t){return _t.resolve(t).then(e,n)}))}))},PSD:{get:function(){return gt},set:function(t){return gt=t}},totalEchoes:{get:function(){return Ft}},newPSD:Rt,usePSD:Qt,scheduler:{get:function(){return ft},set:function(t){ft=t}},rejectionMapper:{get:function(){return vt},set:function(t){vt=t}},follow:function(t,e){return new _t((function(n,r){return Rt((function(e,n){var r=gt;r.unhandleds=[],r.onunhandled=n,r.finalize=J((function(){var t,r=this;t=function(){0===r.unhandleds.length?e():n(r.unhandleds[0])},xt.push((function e(){t(),xt.splice(xt.indexOf(e),1)})),++wt,ft((function(){0==--wt&&Tt()}),[])}),r.finalize),t()}),e,n,r)}))}}),st&&(st.allSettled&&d(_t,"allSettled",(function(){var t=D.apply(null,arguments).map(Ut);return new _t((function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach((function(t,o){return _t.resolve(t).then((function(t){return r[o]={status:"fulfilled",value:t}}),(function(t){return r[o]={status:"rejected",reason:t}})).then((function(){return--n||e(r)}))}))}))})),st.any&&"undefined"!=typeof AggregateError&&d(_t,"any",(function(){var t=D.apply(null,arguments).map(Ut);return new _t((function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,o=new Array(r);t.forEach((function(t,i){return _t.resolve(t).then((function(t){return e(t)}),(function(t){o[i]=t,--r||n(new AggregateError(o))}))}))}))})));var Bt={awaits:0,echoes:0,id:0},Dt=0,qt=[],Nt=0,Ft=0,Mt=0;function Rt(t,e,n,r){var o=gt,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++Mt,mt.env,i.env=lt?{Promise:_t,PromiseProp:{value:_t,configurable:!0,writable:!0},all:_t.all,race:_t.race,allSettled:_t.allSettled,any:_t.any,resolve:_t.resolve,reject:_t.reject}:{},e&&u(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Qt(i,t,n,r),0===i.ref&&i.finalize(),r}function zt(){return Bt.id||(Bt.id=++Dt),++Bt.awaits,Bt.echoes+=ut,Bt.id}function Gt(){return!!Bt.awaits&&(0==--Bt.awaits&&(Bt.id=0),Bt.echoes=Bt.awaits*ut,!0)}function Ut(t){return Bt.echoes&&t&&t.constructor===st?(zt(),t.then((function(t){return Gt(),t}),(function(t){return Gt(),Xt(t)}))):t}function Vt(){var t=qt[qt.length-1];qt.pop(),Yt(t,!1)}function Yt(t,e){var n,r=gt;(e?!Bt.echoes||Nt++&&t===gt:!Nt||--Nt&&t===gt)||queueMicrotask(e?function(t){++Ft,Bt.echoes&&0!=--Bt.echoes||(Bt.echoes=Bt.awaits=Bt.id=0),qt.push(gt),Yt(t,!0)}.bind(null,t):Vt),t!==gt&&(gt=t,r===mt&&(mt.env=Ht()),lt&&(n=mt.env.Promise,e=t.env,(r.global||t.global)&&(Object.defineProperty(o,"Promise",e.PromiseProp),n.all=e.all,n.race=e.race,n.resolve=e.resolve,n.reject=e.reject,e.allSettled&&(n.allSettled=e.allSettled),e.any&&(n.any=e.any))))}function Ht(){var t=o.Promise;return lt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Qt(t,e,n,r,o){var i=gt;try{return Yt(t,!0),e(n,r,o)}finally{Yt(i,!1)}}function Wt(t,e,n,r){return"function"!=typeof t?t:function(){var o=gt;n&&zt(),Yt(e,!0);try{return t.apply(this,arguments)}finally{Yt(o,!1),r&&queueMicrotask(Gt)}}}function $t(t){Promise===st&&0===Bt.echoes?0===Nt?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+N).indexOf("[native code]")&&(zt=Gt=W);var Xt=_t.reject,Jt=String.fromCharCode(65535),Zt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",te="String expected.",ee=[],ne="__dbnames",re="readonly",oe="readwrite";function ie(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ue(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=A(e))[t],e}}function ce(){throw Y.Type()}function se(t,e){try{var n=le(t),r=le(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e<t?1:t<e?-1:0;case"binary":return function(t,e){for(var n=t.length,r=e.length,o=n<r?n:r,i=0;i<o;++i)if(t[i]!==e[i])return t[i]<e[i]?-1:1;return n===r?0:n<r?-1:1}(fe(t),fe(e));case"Array":return function(t,e){for(var n=t.length,r=e.length,o=n<r?n:r,i=0;i<o;++i){var a=se(t[i],e[i]);if(0!==a)return a}return n===r?0:n<r?-1:1}(t,e)}}catch(t){}return NaN}function le(t){var e=typeof t;return"object"!=e?e:ArrayBuffer.isView(t)||"ArrayBuffer"===(t=I(t))?"binary":t}function fe(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var he=(de.prototype._trans=function(t,e,n){var r=this._tx||gt.trans,o=this.name,i=ot&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function a(t,n,r){if(!r.schema[o])throw new Y.NotFound("Table "+o+" not part of transaction");return e(r.idbtrans,r)}var u=Lt();try{var c=r&&r.db._novip===this.db._novip?r===gt.trans?r._promise(t,a,n):Rt((function(){return r._promise(t,a,n)}),{trans:r,transless:gt.transless||gt}):function t(e,n,r,o){if(e.idbdb&&(e._state.openComplete||gt.letThrough||e._vip)){var i=e._createTransaction(n,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===U.InvalidState&&e.isOpen()&&0<--e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return t(e,n,r,o)}))):Xt(i)}return i._promise(n,(function(t,e){return Rt((function(){return gt.trans=i,o(t,e,i)}))})).then((function(t){if("readwrite"===n)try{i.idbtrans.commit()}catch(t){}return"readonly"===n?t:i._completion.then((function(){return t}))}))}if(e._state.openComplete)return Xt(new Y.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Xt(new Y.DatabaseClosed);e.open().catch(W)}return e._state.dbReadyPromise.then((function(){return t(e,n,r,o)}))}(this.db,t,[this.name],a);return i&&(c._consoleTask=i,c=c.catch((function(t){return console.trace(t),Xt(t)}))),c}finally{u&&It()}},de.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?Xt(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(e){return n.core.get({trans:e,key:t}).then((function(t){return n.hook.reading.fire(t)}))})).then(e)},de.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(a(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=i(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){if(t.compound&&e.every((function(e){return 0<=t.keyPath.indexOf(e)}))){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1})).sort((function(t,e){return t.keyPath.length-e.keyPath.length}))[0];if(n&&this.db._maxKey!==Jt){var r=n.keyPath.slice(0,e.length);return this.where(r).equals(r.map((function(e){return t[e]})))}!n&&ot&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var o=this.schema.idxByName,u=this.db._deps.indexedDB;function c(t,e){return 0===u.cmp(t,e)}var s=e.reduce((function(e,n){var r=e[0],i=e[1],u=(e=o[n],t[n]);return[r||e,r||!e?ie(i,e&&e.multi?function(t){return t=x(t,n),a(t)&&t.some((function(t){return c(u,t)}))}:function(t){return c(u,x(t,n))}):i]}),[null,null]);return r=s[0],s=s[1],r?this.where(r.name).equals(t[r.keyPath]).filter(s):n?this.filter(s):this.where(e).equals("")},de.prototype.filter=function(t){return this.toCollection().and(t)},de.prototype.count=function(t){return this.toCollection().count(t)},de.prototype.offset=function(t){return this.toCollection().offset(t)},de.prototype.limit=function(t){return this.toCollection().limit(t)},de.prototype.each=function(t){return this.toCollection().each(t)},de.prototype.toArray=function(t){return this.toCollection().toArray(t)},de.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},de.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,a(t)?"[".concat(t.join("+"),"]"):t))},de.prototype.reverse=function(){return this.toCollection().reverse()},de.prototype.mapToClass=function(e){var n,r=this.db,o=this.name;function i(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof ce&&(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(i,n=e),Object.defineProperty(i.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),i.prototype.table=function(){return o},e=i);for(var a=new Set,u=e.prototype;u;u=c(u))Object.getOwnPropertyNames(u).forEach((function(t){return a.add(t)}));function s(t){if(!t)return t;var n,r=Object.create(e.prototype);for(n in t)if(!a.has(n))try{r[n]=t[n]}catch(t){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=s,this.hook("reading",s),e},de.prototype.defineClass=function(){return this.mapToClass((function(t){u(this,t)}))},de.prototype.add=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=t;return i&&o&&(a=ue(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[a]})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{_(t,i,e)}catch(e){}return e}))},de.prototype.update=function(t,e){return"object"!=typeof t||a(t)?this.where(":id").equals(t).modify(e):void 0===(t=x(t,this.schema.primKey.keyPath))?Xt(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e)},de.prototype.put=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=t;return i&&o&&(a=ue(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"put",values:[a],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{_(t,i,e)}catch(e){}return e}))},de.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):void 0}))},de.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:ae})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):void 0}))},de.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(n){return e.core.getMany({keys:t,trans:n}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},de.prototype.bulkAdd=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0,i=(n=n||(o?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(u=r.schema.primKey).auto;if((u=u.keyPath)&&o)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var a=t.length,u=u&&n?t.map(ue(u)):t;return r.core.mutate({trans:e,type:"add",keys:o,values:u,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult;if(t=t.failures,0===e)return i?n:o;throw new G("".concat(r.name,".bulkAdd(): ").concat(e," of ").concat(a," operations failed"),t)}))}))},de.prototype.bulkPut=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0,i=(n=n||(o?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(u=r.schema.primKey).auto;if((u=u.keyPath)&&o)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var a=t.length,u=u&&n?t.map(ue(u)):t;return r.core.mutate({trans:e,type:"put",keys:o,values:u,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult;if(t=t.failures,0===e)return i?n:o;throw new G("".concat(r.name,".bulkPut(): ").concat(e," of ").concat(a," operations failed"),t)}))}))},de.prototype.bulkUpdate=function(t){var e=this,n=this.core,r=t.map((function(t){return t.key})),o=t.map((function(t){return t.changes})),i=[];return this._trans("readwrite",(function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then((function(u){var c=[],s=[];t.forEach((function(t,n){var r=t.key,o=t.changes,a=u[n];if(a){for(var l=0,f=Object.keys(o);l<f.length;l++){var h=f[l],d=o[h];if(h===e.schema.primKey.keyPath){if(0!==se(d,r))throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else _(a,h,d)}i.push(n),c.push(r),s.push(a)}}));var l=c.length;return n.mutate({trans:a,type:"put",keys:c,values:s,updates:{keys:r,changeSpecs:o}}).then((function(t){var n=t.numFailures,r=t.failures;if(0===n)return l;for(var o=0,a=Object.keys(r);o<a.length;o++){var u,c=a[o],s=i[Number(c)];null!=s&&(u=r[c],delete r[c],r[s]=u)}throw new G("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(l," operations failed"),r)}))}))}))},de.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:t})})).then((function(t){var r=t.numFailures,o=t.lastResult;if(t=t.failures,0===r)return o;throw new G("".concat(e.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),t)}))},de);function de(){}function pe(t){function e(e,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return n[e].subscribe.apply(null,i),t}if("string"==typeof e)return n[e]}var n={};e.addEventType=u;for(var r=1,o=arguments.length;r<o;++r)u(arguments[r]);return e;function u(t,r,o){if("object"!=typeof t){var c;r=r||nt;var s={subscribers:[],fire:o=o||W,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=r(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter((function(e){return e!==t})),s.fire=s.subscribers.reduce(r,o)}};return n[t]=e[t]=s}i(c=t).forEach((function(t){var e=c[t];if(a(e))u(t,c[t][0],c[t][1]);else{if("asap"!==e)throw new Y.InvalidArgument("Invalid event config");var n=u(t,$,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach((function(t){w((function(){t.apply(null,e)}))}))}))}}))}}function ye(t,e){return p(e).from({prototype:t}),e}function ve(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function me(t,e){t.filter=ie(t.filter,e)}function ge(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return ie(r(),e())}:e,t.justLimit=n&&!r}function be(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new Y.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function we(t,e,n){var r=be(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function xe(t,e,n,r){var o=t.replayFilter?ie(t.filter,t.replayFilter()):t.filter;if(t.or){var i={},a=function(t,n,r){var a,u;o&&!o(n,r,(function(t){return n.stop(t)}),(function(t){return n.fail(t)}))||("[object ArrayBuffer]"==(u=""+(a=n.primaryKey))&&(u=""+new Uint8Array(a)),l(i,u)||(i[u]=!0,e(t,n,r)))};return Promise.all([t.or._iterate(a,n),_e(we(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return _e(we(t,r,n),ie(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function _e(t,e,n,r){var o=Kt(r?function(t,e,o){return n(r(t),e,o)}:n);return t.then((function(t){if(t)return t.start((function(){var n=function(){return t.continue()};e&&!e(t,(function(t){return n=t}),(function(e){t.stop(e),n=W}),(function(e){t.fail(e),n=W}))||o(t.value,t,(function(t){return n=t})),n()}))}))}P=Symbol();var ke=(Ee.prototype.execute=function(t){if(void 0!==this.add){var e=this.add;if(a(e))return r(r([],a(t)?t:[],!0),e,!0).sort();if("number"==typeof e)return(Number(t)||0)+e;if("bigint"==typeof e)try{return BigInt(t)+e}catch(t){return BigInt(0)+e}throw new TypeError("Invalid term ".concat(e))}if(void 0!==this.remove){var n=this.remove;if(a(n))return a(t)?t.filter((function(t){return!n.includes(t)})).sort():[];if("number"==typeof n)return Number(t)-n;if("bigint"==typeof n)try{return BigInt(t)-n}catch(t){return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(e=null===(e=this.replacePrefix)||void 0===e?void 0:e[0])&&"string"==typeof t&&t.startsWith(e)?this.replacePrefix[1]+t.substring(e.length):t},Ee);function Ee(t){Object.assign(this,t)}var Oe=(Pe.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,Xt.bind(null,n.error)):n.table._trans("readonly",t).then(e)},Pe.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,Xt.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},Pe.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=ie(e.algorithm,t)},Pe.prototype._iterate=function(t,e){return xe(this._ctx,t,e,this._ctx.table.core)},Pe.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&u(n,t),e._ctx=n,e},Pe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Pe.prototype.each=function(t){var e=this._ctx;return this._read((function(n){return xe(e,t,n,e.table.core)}))},Pe.prototype.count=function(t){var e=this;return this._read((function(t){var n=e._ctx,r=n.table.core;if(ve(n,!0))return r.count({trans:t,query:{index:be(n,r.schema),range:n.range}}).then((function(t){return Math.min(t,n.limit)}));var o=0;return xe(n,(function(){return++o,!1}),t,r).then((function(){return o}))})).then(t)},Pe.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],o=n.length-1;function i(t,e){return e?i(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function u(t,e){return(t=i(t,o))<(e=i(e,o))?-a:e<t?a:0}return this.toArray((function(t){return t.sort(u)})).then(e)},Pe.prototype.toArray=function(t){var e=this;return this._read((function(t){var n=e._ctx;if("next"===n.dir&&ve(n,!0)&&0<n.limit){var r=n.valueMapper,o=be(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(t){return t=t.result,r?t.map(r):t}))}var i=[];return xe(n,(function(t){return i.push(t)}),t,n.table.core).then((function(){return i}))}),t)},Pe.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,ve(e)?ge(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?--e:n((function(){t.advance(e),e=0})),!1)}})):ge(e,(function(){var e=t;return function(){return--e<0}}))),this},Pe.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ge(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),0<=e}}),!0),this},Pe.prototype.until=function(t,e){return me(this._ctx,(function(n,r,o){return!t(n.value)||(r(o),e)})),this},Pe.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},Pe.prototype.last=function(t){return this.reverse().first(t)},Pe.prototype.filter=function(t){var e;return me(this._ctx,(function(e){return t(e.value)})),(e=this._ctx).isMatch=ie(e.isMatch,t),this},Pe.prototype.and=function(t){return this.filter(t)},Pe.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},Pe.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Pe.prototype.desc=function(){return this.reverse()},Pe.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},Pe.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},Pe.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},Pe.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},Pe.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&ve(e,!0)&&0<e.limit)return this._read((function(t){var n=be(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((function(t){return t.result})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},Pe.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},Pe.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},Pe.prototype.lastKey=function(t){return this.reverse().firstKey(t)},Pe.prototype.distinct=function(){var t;if(!(t=(t=this._ctx).index&&t.table.schema.idxByName[t.index])||!t.multi)return this;var e={};return me(this._ctx,(function(t){var n=t.primaryKey.toString();return t=l(e,n),e[n]=!0,!t})),this},Pe.prototype.modify=function(t){var e=this,n=this._ctx;return this._write((function(r){var o,a,u;function c(t,e){var n=e.failures;e=e.numFailures,y+=t-e;for(var r=0,o=i(n);r<o.length;r++){var a=o[r];p.push(n[a])}}u="function"==typeof t?t:(o=i(t),a=o.length,function(e){for(var n=!1,r=0;r<a;++r){var i=o[r],u=t[i],c=x(e,i);u instanceof ke?(_(e,i,u.execute(c)),n=!0):c!==u&&(_(e,i,u),n=!0)}return n});var s=n.table.core,l=s.schema.primaryKey,f=l.outbound,h=l.extractKey,d=e.db._options.modifyChunkSize||200,p=[],y=0,v=[];return e.clone().primaryKeys().then((function(e){var o=ve(n)&&n.limit===1/0&&("function"!=typeof t||t===Se)&&{index:n.index,range:n.range};return function n(i){var a=Math.min(d,e.length-i);return s.getMany({trans:r,keys:e.slice(i,i+a),cache:"immutable"}).then((function(l){for(var p=[],y=[],v=f?[]:null,m=[],g=0;g<a;++g){var b=l[g],w={value:A(b),primKey:e[i+g]};!1!==u.call(w,w.value,w)&&(null==w.value?m.push(e[i+g]):f||0===se(h(b),h(w.value))?(y.push(w.value),f&&v.push(e[i+g])):(m.push(e[i+g]),p.push(w.value)))}return Promise.resolve(0<p.length&&s.mutate({trans:r,type:"add",values:p}).then((function(t){for(var e in t.failures)m.splice(parseInt(e),1);c(p.length,t)}))).then((function(){return(0<y.length||o&&"object"==typeof t)&&s.mutate({trans:r,type:"put",keys:v,values:y,criteria:o,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:0<i}).then((function(t){return c(y.length,t)}))})).then((function(){return(0<m.length||o&&t===Se)&&s.mutate({trans:r,type:"delete",keys:m,criteria:o,isAdditionalChunk:0<i}).then((function(t){return c(m.length,t)}))})).then((function(){return e.length>i+a&&n(i+d)}))}))}(0).then((function(){if(0<p.length)throw new z("Error modifying one or more objects",p,y,v);return e.length}))}))}))},Pe.prototype.delete=function(){var t=this._ctx,e=t.range;return ve(t)&&(t.isPrimKey||3===e.type)?this._write((function(n){var r=t.table.core.schema.primaryKey,o=e;return t.table.core.count({trans:n,query:{index:r,range:o}}).then((function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(t){var n=t.failures;if(t.lastResult,t.results,t=t.numFailures)throw new z("Could not delete some values",Object.keys(n).map((function(t){return n[t]})),e-t);return e-t}))}))})):this.modify(Se)},Pe);function Pe(){}var Se=function(t,e){return e.value=null};function je(t,e){return t<e?-1:t===e?0:1}function Ae(t,e){return e<t?-1:t===e?0:1}function Le(t,e,n){return(t=t instanceof Be?new t.Collection(t):t)._ctx.error=new(n||TypeError)(e),t}function Ie(t){return new t.Collection(t,(function(){return Ke("")})).limit(0)}function Te(t,e,n,r){var o,i,a,u,c,s,l,f=n.length;if(!n.every((function(t){return"string"==typeof t})))return Le(t,te);function h(t){o="next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()},i="next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()},a="next"===t?je:Ae;var e=n.map((function(t){return{lower:i(t),upper:o(t)}})).sort((function(t,e){return a(t.lower,e.lower)}));u=e.map((function(t){return t.upper})),c=e.map((function(t){return t.lower})),l="next"===(s=t)?"":r}h("next"),(t=new t.Collection(t,(function(){return Ce(u[0],c[f-1]+r)})))._ondirectionchange=function(t){h(t)};var d=0;return t._addAlgorithm((function(t,n,r){var o=t.key;if("string"!=typeof o)return!1;var h=i(o);if(e(h,c,d))return!0;for(var p=null,y=d;y<f;++y){var v=function(t,e,n,r,o,i){for(var a=Math.min(t.length,r.length),u=-1,c=0;c<a;++c){var s=e[c];if(s!==r[c])return o(t[c],n[c])<0?t.substr(0,c)+n[c]+n.substr(c+1):o(t[c],r[c])<0?t.substr(0,c)+r[c]+n.substr(c+1):0<=u?t.substr(0,u)+e[u]+n.substr(u+1):null;o(t[c],s)<0&&(u=c)}return a<r.length&&"next"===i?t+n.substr(t.length):a<t.length&&"prev"===i?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}(o,h,u[y],c[y],a,s);null===v&&null===p?d=y+1:(null===p||0<a(p,v))&&(p=v)}return n(null!==p?function(){t.continue(p+l)}:r),!1})),t}function Ce(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ke(t){return{type:1,lower:t,upper:t}}var Be=(Object.defineProperty(De.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),De.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(t,e)||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?Ie(this):new this.Collection(this,(function(){return Ce(t,e,!n,!r)}))}catch(t){return Le(this,Zt)}},De.prototype.equals=function(t){return null==t?Le(this,Zt):new this.Collection(this,(function(){return Ke(t)}))},De.prototype.above=function(t){return null==t?Le(this,Zt):new this.Collection(this,(function(){return Ce(t,void 0,!0)}))},De.prototype.aboveOrEqual=function(t){return null==t?Le(this,Zt):new this.Collection(this,(function(){return Ce(t,void 0,!1)}))},De.prototype.below=function(t){return null==t?Le(this,Zt):new this.Collection(this,(function(){return Ce(void 0,t,!1,!0)}))},De.prototype.belowOrEqual=function(t){return null==t?Le(this,Zt):new this.Collection(this,(function(){return Ce(void 0,t)}))},De.prototype.startsWith=function(t){return"string"!=typeof t?Le(this,te):this.between(t,t+Jt,!0,!0)},De.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):Te(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],Jt)},De.prototype.equalsIgnoreCase=function(t){return Te(this,(function(t,e){return t===e[0]}),[t],"")},De.prototype.anyOfIgnoreCase=function(){var t=D.apply(B,arguments);return 0===t.length?Ie(this):Te(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},De.prototype.startsWithAnyOfIgnoreCase=function(){var t=D.apply(B,arguments);return 0===t.length?Ie(this):Te(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,Jt)},De.prototype.anyOf=function(){var t=this,e=D.apply(B,arguments),n=this._cmp;try{e.sort(n)}catch(r){return Le(this,Zt)}if(0===e.length)return Ie(this);var r=new this.Collection(this,(function(){return Ce(e[0],e[e.length-1])}));r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var o=0;return r._addAlgorithm((function(t,r,i){for(var a=t.key;0<n(a,e[o]);)if(++o===e.length)return r(i),!1;return 0===n(a,e[o])||(r((function(){t.continue(e[o])})),!1)})),r},De.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},De.prototype.noneOf=function(){var t=D.apply(B,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return Le(this,Zt)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},De.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(0===t.length)return Ie(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&o(t[0],t[1])<=0})))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var c,s=!e||!1!==e.includeLowers,l=e&&!0===e.includeUppers,f=o;function h(t,e){return f(t[0],e[0])}try{(c=t.reduce((function(t,e){for(var n=0,o=t.length;n<o;++n){var i=t[n];if(r(e[0],i[1])<0&&0<r(e[1],i[0])){i[0]=a(i[0],e[0]),i[1]=u(i[1],e[1]);break}}return n===o&&t.push(e),t}),[])).sort(h)}catch(t){return Le(this,Zt)}var d=0,p=l?function(t){return 0<o(t,c[d][1])}:function(t){return 0<=o(t,c[d][1])},y=s?function(t){return 0<i(t,c[d][0])}:function(t){return 0<=i(t,c[d][0])},v=p;return(t=new this.Collection(this,(function(){return Ce(c[0][0],c[c.length-1][1],!s,!l)})))._ondirectionchange=function(t){f="next"===t?(v=p,o):(v=y,i),c.sort(h)},t._addAlgorithm((function(t,e,r){for(var i,a=t.key;v(a);)if(++d===c.length)return e(r),!1;return!p(i=a)&&!y(i)||(0===n._cmp(a,c[d][1])||0===n._cmp(a,c[d][0])||e((function(){f===o?t.continue(c[d][0]):t.continue(c[d][1])})),!1)})),t},De.prototype.startsWithAnyOf=function(){var t=D.apply(B,arguments);return t.every((function(t){return"string"==typeof t}))?0===t.length?Ie(this):this.inAnyRange(t.map((function(t){return[t,t+Jt]}))):Le(this,"startsWithAnyOf() only works with strings")},De);function De(){}function qe(t){return Kt((function(e){return Ne(e),t(e.target.error),!1}))}function Ne(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Fe="storagemutated",Me="x-storagemutated-1",Re=pe(null,Fe),ze=(Ge.prototype._lock=function(){return b(!gt.global),++this._reculock,1!==this._reculock||gt.global||(gt.lockOwnerFor=this),this},Ge.prototype._unlock=function(){if(b(!gt.global),0==--this._reculock)for(gt.global||(gt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Qt(t[1],t[0])}catch(t){}}return this},Ge.prototype._locked=function(){return this._reculock&&gt.lockOwnerFor!==this},Ge.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(r);case"MissingAPIError":throw new Y.MissingAPI(r.message,r);default:throw new Y.OpenFailed(r)}if(!this.active)throw new Y.TransactionInactive;return b(null===this._completion._state),(t=this.idbtrans=t||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt((function(n){Ne(n),e._reject(t.error)})),t.onabort=Kt((function(n){Ne(n),e.active&&e._reject(new Y.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=Kt((function(){e.active=!1,e._resolve(),"mutatedParts"in t&&Re.storagemutated.fire(t.mutatedParts)})),this},Ge.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return Xt(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return Xt(new Y.TransactionInactive);if(this._locked())return new _t((function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},gt])}));if(n)return Rt((function(){var t=new _t((function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var o=new _t((function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return o._lib=!0,o},Ge.prototype._root=function(){return this.parent?this.parent._root():this},Ge.prototype.waitFor=function(t){var e,n=this._root(),r=_t.resolve(t);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],e=n.idbtrans.objectStore(n.storeNames[0]),function t(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=t)}());var o=n._waitingFor;return new _t((function(t,e){r.then((function(e){return n._waitingQueue.push(Kt(t.bind(null,e)))}),(function(t){return n._waitingQueue.push(Kt(e.bind(null,t)))})).finally((function(){n._waitingFor===o&&(n._waitingFor=null)}))}))},Ge.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},Ge.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(l(e,t))return e[t];var n=this.schema[t];if(!n)throw new Y.NotFound("Table "+t+" not part of transaction");return(n=new this.db.Table(t,n,this)).core=this.db.core.table(t),e[t]=n},Ge);function Ge(){}function Ue(t,e,n,r,o,i,a){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+Ve(e)}}function Ve(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Ye(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:(r=function(t){return[t.name,t]},n.reduce((function(t,e,n){return(n=r(e))&&(t[n[0]]=n[1]),t}),{}))};var r}var He=function(t){try{return t.only([[]]),He=function(){return[[]]},[[]]}catch(t){return He=function(){return Jt},Jt}};function Qe(t){return null==t?function(){}:"string"==typeof t?1===(e=t).split(".").length?function(t){return t[e]}:function(t){return x(t,e)}:function(e){return x(e,t)};var e}function We(t){return[].slice.call(t)}var $e=0;function Xe(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Je(t,e,n){function r(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,r=t.upper,o=t.lowerOpen;return t=t.upperOpen,void 0===n?void 0===r?null:e.upperBound(r,!!t):void 0===r?e.lowerBound(n,!!o):e.bound(n,r,!!o,!!t)}var o,i,u,c=(i=n,u=We((o=t).objectStoreNames),{schema:{name:o.name,tables:u.map((function(t){return i.objectStore(t)})).map((function(t){var e=t.keyPath,n=t.autoIncrement,r=a(e),o={};return n={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==e,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:Qe(e)},indexes:We(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,n=t.unique,r=t.multiEntry;return t=t.keyPath,r={name:e,compound:a(t),keyPath:t,unique:n,multiEntry:r,extractKey:Qe(t)},o[Xe(t)]=r})),getIndexByKeyPath:function(t){return o[Xe(t)]}},o[":id"]=n.primaryKey,null!=e&&(o[Xe(e)]=n.primaryKey),n}))},hasGetAll:0<u.length&&"getAll"in i.objectStore(u[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),s=(n=c.schema,c.hasGetAll),l=(c=n.tables.map((function(t){var e,n=t.name;return{name:n,schema:t,mutate:function(t){var e=t.trans,o=t.type,i=t.keys,a=t.values,u=t.range;return new Promise((function(t,c){t=Kt(t);var s=e.objectStore(n),l=null==s.keyPath,f="put"===o||"add"===o;if(!f&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var h,d=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return t({numFailures:0,failures:{},results:[],lastResult:void 0});function p(t){++m,Ne(t)}var y=[],v=[],m=0;if("deleteRange"===o){if(4===u.type)return t({numFailures:m,failures:v,results:[],lastResult:void 0});3===u.type?y.push(h=s.clear()):y.push(h=s.delete(r(u)))}else{var g=(l=f?l?[a,i]:[a,null]:[i,null])[0],b=l[1];if(f)for(var w=0;w<d;++w)y.push(h=b&&void 0!==b[w]?s[o](g[w],b[w]):s[o](g[w])),h.onerror=p;else for(w=0;w<d;++w)y.push(h=s[o](g[w])),h.onerror=p}function x(e){e=e.target.result,y.forEach((function(t,e){return null!=t.error&&(v[e]=t.error)})),t({numFailures:m,failures:v,results:"delete"===o?i:y.map((function(t){return t.result})),lastResult:e})}h.onerror=function(t){p(t),x(t)},h.onsuccess=x}))},getMany:function(t){var e=t.trans,r=t.keys;return new Promise((function(t,o){t=Kt(t);for(var i,a=e.objectStore(n),u=r.length,c=new Array(u),s=0,l=0,f=function(e){e=e.target,c[e._pos]=e.result,++l===s&&t(c)},h=qe(o),d=0;d<u;++d)null!=r[d]&&((i=a.get(r[d]))._pos=d,i.onsuccess=f,i.onerror=h,++s);0===s&&t(c)}))},get:function(t){var e=t.trans,r=t.key;return new Promise((function(t,o){t=Kt(t);var i=e.objectStore(n).get(r);i.onsuccess=function(e){return t(e.target.result)},i.onerror=qe(o)}))},query:(e=s,function(t){return new Promise((function(o,i){o=Kt(o);var a,u,c,s=t.trans,l=t.values,f=t.limit,h=t.query,d=f===1/0?void 0:f,p=h.index;if(h=h.range,s=s.objectStore(n),p=p.isPrimaryKey?s:s.index(p.name),h=r(h),0===f)return o({result:[]});e?((d=l?p.getAll(h,d):p.getAllKeys(h,d)).onsuccess=function(t){return o({result:t.target.result})},d.onerror=qe(i)):(a=0,u=!l&&"openKeyCursor"in p?p.openKeyCursor(h):p.openCursor(h),c=[],u.onsuccess=function(t){var e=u.result;return e?(c.push(l?e.value:e.primaryKey),++a===f?o({result:c}):void e.continue()):o({result:c})},u.onerror=qe(i))}))}),openCursor:function(t){var e=t.trans,o=t.values,i=t.query,a=t.reverse,u=t.unique;return new Promise((function(t,c){t=Kt(t);var s=i.index,l=i.range,f=e.objectStore(n),h=(f=s.isPrimaryKey?f:f.index(s.name),s=a?u?"prevunique":"prev":u?"nextunique":"next",!o&&"openKeyCursor"in f?f.openKeyCursor(r(l),s):f.openCursor(r(l),s));h.onerror=qe(c),h.onsuccess=Kt((function(n){var r,o,i,a,u=h.result;u?(u.___id=++$e,u.done=!1,r=u.continue.bind(u),o=(o=u.continuePrimaryKey)&&o.bind(u),i=u.advance.bind(u),a=function(){throw new Error("Cursor not stopped")},u.trans=e,u.stop=u.continue=u.continuePrimaryKey=u.advance=function(){throw new Error("Cursor not started")},u.fail=Kt(c),u.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},u.start=function(t){function e(){if(h.result)try{t()}catch(t){u.fail(t)}else u.done=!0,u.start=function(){throw new Error("Cursor behind last entry")},u.stop()}var n=new Promise((function(t,e){t=Kt(t),h.onerror=qe(e),u.fail=e,u.stop=function(e){u.stop=u.continue=u.continuePrimaryKey=u.advance=a,t(e)}}));return h.onsuccess=Kt((function(t){h.onsuccess=e,e()})),u.continue=r,u.continuePrimaryKey=o,u.advance=i,e(),n},t(u)):t(null)}),c)}))},count:function(t){var e=t.query,o=t.trans,i=e.index,a=e.range;return new Promise((function(t,e){var u=o.objectStore(n),c=i.isPrimaryKey?u:u.index(i.name);(c=(u=r(a))?c.count(u):c.count()).onsuccess=Kt((function(e){return t(e.target.result)})),c.onerror=qe(e)}))}}})),{});return c.forEach((function(t){return l[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!l[t])throw new Error("Table '".concat(t,"' not found"));return l[t]},MIN_KEY:-1/0,MAX_KEY:He(e),schema:n}}function Ze(t,n){var r=n.db;n=function(t,n,r,o){var i=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=Je(n,i,o),t.dbcore.reduce((function(t,n){return n=n.create,e(e({},t),n(t))}),o))}}(t._middlewares,r,t._deps,n),t.core=n.dbcore,t.tables.forEach((function(e){var n=e.name;t.core.schema.tables.some((function(t){return t.name===n}))&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))}))}function tn(t,e,n,r){n.forEach((function(n){var o=r[n];e.forEach((function(e){var r=function t(e,n){return y(e,n)||(e=c(e))&&t(e,n)}(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?d(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,o))}))}))}function en(t,e){e.forEach((function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]}))}function nn(t,e){return t._cfg.version-e._cfg.version}function rn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var o=t[n],i=e[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,c=i.idxByName,s=void 0;for(s in u)c[s]||a.del.push(s);for(s in c){var l=u[s],f=c[s];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(0<a.del.length||0<a.add.length||0<a.change.length)&&r.change.push(a)}}else r.add.push([n,i])}return r}function on(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){return un(o,t)})),o}function an(t,e){i(t).forEach((function(n){e.db.objectStoreNames.contains(n)||(ot&&console.debug("Dexie: Creating missing table",n),on(e,n,t[n].primKey,t[n].indexes))}))}function un(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function cn(t,e,n){var r={};return m(e.objectStoreNames,0).forEach((function(t){for(var e=n.objectStore(t),o=Ue(Ve(u=e.keyPath),u||"",!0,!1,!!e.autoIncrement,u&&"string"!=typeof u,!0),i=[],a=0;a<e.indexNames.length;++a){var u=(c=e.index(e.indexNames[a])).keyPath,c=Ue(c.name,u,!!c.unique,!!c.multiEntry,!1,u&&"string"!=typeof u,!1);i.push(c)}r[t]=Ye(t,o,i)})),r}function sn(t,e,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=n.objectStore(a);t._hasGetAll="getAll"in u;for(var c=0;c<u.indexNames.length;++c){var s=u.indexNames[c],l=u.index(s).keyPath,f="string"==typeof l?l:"["+m(l).join("+")+"]";!e[a]||(l=e[a].idxByName[f])&&(l.name=s,delete e[a].idxByName[f],e[a].idxByName[s]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function ln(t){return t.split(",").map((function(t,e){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ue(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),a(r),0===e)}))}var fn=(hn.prototype._parseStoresSpec=function(t,e){i(t).forEach((function(n){if(null!==t[n]){var r=ln(t[n]),o=r.shift();if(o.unique=!0,o.multi)throw new Y.Schema("Primary key cannot be multi-valued");r.forEach((function(t){if(t.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")})),e[n]=Ye(n,o,r)}}))},hn.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,t):t,t=e._versions;var n={},r={};return t.forEach((function(t){u(n,t._cfg.storesSource),r=t._cfg.dbschema={},t._parseStoresSpec(n,r)})),e._dbSchema=r,en(e,[e._allTables,e,e.Transaction.prototype]),tn(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],i(r),r),e._storeNames=i(r),this},hn.prototype.upgrade=function(t){return this._cfg.contentUpgrade=rt(this._cfg.contentUpgrade||W,t),this},hn);function hn(){}function dn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new $n(ne,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function pn(t){return t&&"function"==typeof t.databases}function yn(t){return Rt((function(){return gt.letThrough=!0,t()}))}function vn(t){return!("from"in t)}var mn=function(t,e){if(!this){var n=new mn;return t&&"d"in t&&u(n,t),n}u(this,arguments.length?{d:1,from:t,to:1<arguments.length?e:t}:{d:0})};function gn(t,e,n){var r=se(e,n);if(!isNaN(r)){if(0<r)throw RangeError();if(vn(t))return u(t,{from:e,to:n,d:1});var o=t.l;if(r=t.r,se(n,t.from)<0)return o?gn(o,e,n):t.l={from:e,to:n,d:1,l:null,r:null},_n(t);if(0<se(e,t.to))return r?gn(r,e,n):t.r={from:e,to:n,d:1,l:null,r:null},_n(t);se(e,t.from)<0&&(t.from=e,t.l=null,t.d=r?r.d+1:1),0<se(n,t.to)&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1),n=!t.r,o&&!t.l&&bn(t,o),r&&n&&bn(t,r)}}function bn(t,e){vn(e)||function t(e,n){var r=n.from,o=n.to,i=n.l;n=n.r,gn(e,r,o),i&&t(e,i),n&&t(e,n)}(t,e)}function wn(t,e){var n=xn(e),r=n.next();if(r.done)return!1;for(var o=r.value,i=xn(t),a=i.next(o.from),u=a.value;!r.done&&!a.done;){if(se(u.from,o.to)<=0&&0<=se(u.to,o.from))return!0;se(o.from,u.from)<0?o=(r=n.next(u.from)).value:u=(a=i.next(o.from)).value}return!1}function xn(t){var e=vn(t)?null:{s:0,n:t};return{next:function(t){for(var n=0<arguments.length;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&se(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||se(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function _n(t){var n,r,o=((null===(n=t.r)||void 0===n?void 0:n.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),i=1<o?"r":o<-1?"l":"";i&&(n="r"==i?"l":"r",r=e({},t),o=t[i],t.from=o.from,t.to=o.to,t[i]=o[i],r[i]=o[n],(t[n]=r).d=kn(r)),t.d=kn(t)}function kn(t){var e=t.r;return t=t.l,(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}function En(t,e){return i(e).forEach((function(n){t[n]?bn(t[n],e[n]):t[n]=function t(e){var n,r,o={};for(n in e)l(e,n)&&(r=e[n],o[n]=!r||"object"!=typeof r||S.has(r.constructor)?r:t(r));return o}(e[n])})),t}function On(t,e){return t.all||e.all||Object.keys(t).some((function(n){return e[n]&&wn(e[n],t[n])}))}f(mn.prototype,((N={add:function(t){return bn(this,t),this},addKey:function(t){return gn(this,t,t),this},addKeys:function(t){var e=this;return t.forEach((function(t){return gn(e,t,t)})),this},hasKey:function(t){var e=xn(this).next(t).value;return e&&se(e.from,t)<=0&&0<=se(e.to,t)}})[T]=function(){return xn(this)},N));var Pn={},Sn={},jn=!1;function An(t){En(Sn,t),jn||(jn=!0,setTimeout((function(){jn=!1,Ln(Sn,!(Sn={}))}),0))}function Ln(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var r=0,o=Object.values(Pn);r<o.length;r++)In(a=o[r],t,n,e);else for(var i in t){var a,u=/^idb\:\/\/(.*)\/(.*)\//.exec(i);u&&(i=u[1],u=u[2],(a=Pn["idb://".concat(i,"/").concat(u)])&&In(a,t,n,e))}n.forEach((function(t){return t()}))}function In(t,e,n,r){for(var o=[],i=0,a=Object.entries(t.queries.query);i<a.length;i++){for(var u=a[i],c=u[0],s=[],l=0,f=u[1];l<f.length;l++){var h=f[l];On(e,h.obsSet)?h.subscribers.forEach((function(t){return n.add(t)})):r&&s.push(h)}r&&o.push([c,s])}if(r)for(var d=0,p=o;d<p.length;d++){var y=p[d];c=y[0],s=y[1],t.queries.query[c]=s}}function Tn(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?Xt(e.dbOpenError):t}));e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller,o=Math.round(10*t.verno),a=!1;function u(){if(e.openCanceller!==r)throw new Y.DatabaseClosed("db.open() was cancelled")}var c,s=e.dbReadyResolve,l=null,f=!1;return _t.race([r,("undefined"==typeof navigator?_t.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){function e(){return indexedDB.databases().finally(t)}c=setInterval(e,100),e()})).finally((function(){return clearInterval(c)})):Promise.resolve()).then((function r(){return new _t((function(c,s){if(u(),!n)throw new Y.MissingAPI;var h=t.name,d=e.autoSchema||!o?n.open(h):n.open(h,o);if(!d)throw new Y.MissingAPI;d.onerror=qe(s),d.onblocked=Kt(t._fireOnBlocked),d.onupgradeneeded=Kt((function(r){var o;l=d.transaction,e.autoSchema&&!t._options.allowEmptyDB?(d.onerror=Ne,l.abort(),d.result.close(),(o=n.deleteDatabase(h)).onsuccess=o.onerror=Kt((function(){s(new Y.NoSuchDatabase("Database ".concat(h," doesnt exist")))}))):(l.onerror=qe(s),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,f=r<1,t.idbdb=d.result,a&&function(t,e){an(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=cn(0,t.idbdb,e);sn(t,t._dbSchema,e);for(var r=0,o=rn(n,t._dbSchema).change;r<o.length;r++){var i=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach((function(e){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),un(n,e)}))}(o[r]);if("object"==typeof i)return i.value}}(t,l),function(t,e,n,r){var o=t._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Ye("$meta",ln("")[0],[]),t._storeNames.push("$meta"));var a=t._createTransaction("readwrite",t._storeNames,o);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),c=gt.transless||gt;Rt((function(){return gt.trans=a,gt.transless=c,0!==e?(Ze(t,n),s=e,((r=a).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(t){return null!=t?t:s})):_t.resolve(s)).then((function(e){return o=e,u=a,c=n,s=[],e=(r=t)._versions,l=r._dbSchema=cn(0,r.idbdb,c),0!==(e=e.filter((function(t){return t._cfg.version>=o}))).length?(e.forEach((function(t){s.push((function(){var e=l,n=t._cfg.dbschema;sn(r,e,c),sn(r,n,c),l=r._dbSchema=n;var a=rn(e,n);a.add.forEach((function(t){on(c,t[0],t[1].primKey,t[1].indexes)})),a.change.forEach((function(t){if(t.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var e=c.objectStore(t.name);t.add.forEach((function(t){return un(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),un(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var s=t._cfg.contentUpgrade;if(s&&t._cfg.version>o){Ze(r,c),u._memoizedTables={};var f=k(n);a.del.forEach((function(t){f[t]=e[t]})),en(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],i(f),f),u.schema=f;var h,d=q(s);return d&&zt(),a=_t.follow((function(){var t;(h=s(u))&&d&&(t=Gt.bind(null,null),h.then(t,t))})),h&&"function"==typeof h.then?_t.resolve(h):a.then((function(){return h}))}})),s.push((function(e){var n,o,i=t._cfg.dbschema;n=i,o=e,[].slice.call(o.db.objectStoreNames).forEach((function(t){return null==n[t]&&o.db.deleteObjectStore(t)})),en(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),u.schema=r._dbSchema})),s.push((function(e){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===t._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(t){return"$meta"!==t}))):e.objectStore("$meta").put(t._cfg.version,"version"))}))})),function t(){return s.length?_t.resolve(s.shift()(u.idbtrans)).then(t):_t.resolve()}().then((function(){an(l,c)}))):_t.resolve();var r,o,u,c,s,l})).catch(u)):(i(o).forEach((function(t){on(n,t,o[t].primKey,o[t].indexes)})),Ze(t,n),void _t.follow((function(){return t.on.populate.fire(a)})).catch(u));var r,s}))}(t,r/10,l,s))}),s),d.onsuccess=Kt((function(){l=null;var n,u,s,p,y,v=t.idbdb=d.result,g=m(v.objectStoreNames);if(0<g.length)try{var b=v.transaction(1===(p=g).length?p[0]:p,"readonly");if(e.autoSchema)u=v,s=b,(n=t).verno=u.version/10,s=n._dbSchema=cn(0,u,s),n._storeNames=m(u.objectStoreNames,0),tn(n,[n._allTables],i(s),s);else if(sn(t,t._dbSchema,b),((y=rn(cn(0,(y=t).idbdb,b),y._dbSchema)).add.length||y.change.some((function(t){return t.add.length||t.change.length})))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),v.close(),o=v.version+1,a=!0,c(r());Ze(t,b)}catch(n){}ee.push(t),v.onversionchange=Kt((function(n){e.vcFired=!0,t.on("versionchange").fire(n)})),v.onclose=Kt((function(e){t.on("close").fire(e)})),f&&(y=t._deps,b=h,v=y.indexedDB,y=y.IDBKeyRange,pn(v)||b===ne||dn(v,y).put({name:b}).catch(W)),c()}),s)})).catch((function(t){switch(null==t?void 0:t.name){case"UnknownError":if(0<e.PR1398_maxLoop)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),r();break;case"VersionError":if(0<o)return o=0,r()}return _t.reject(t)}))}))]).then((function(){return u(),e.onReadyBeingFired=[],_t.resolve(yn((function(){return t.on.ready.fire(t.vip)}))).then((function n(){if(0<e.onReadyBeingFired.length){var r=e.onReadyBeingFired.reduce(rt,W);return e.onReadyBeingFired=[],_t.resolve(yn((function(){return r(t.vip)}))).then(n)}}))})).finally((function(){e.openCanceller===r&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)})).catch((function(n){e.dbOpenError=n;try{l&&l.abort()}catch(n){}return r===e.openCanceller&&t._close(),Xt(n)})).finally((function(){e.openComplete=!0,s()})).then((function(){var e;return f&&(e={},t.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(r.name)]=new mn(-1/0,[[[]]]))})),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new mn(-1/0,[[[]]])})),Re(Fe).fire(e),Ln(e,!0)),t}))}function Cn(t){function e(e){return t.next(e)}var n=o(e),r=o((function(e){return t.throw(e)}));function o(t){return function(e){var o=t(e);return e=o.value,o.done?e:e&&"function"==typeof e.then?e.then(n,r):a(e)?Promise.all(e).then(n,r):n(e)}}return o(e)()}function Kn(t,e,n){for(var r=a(t)?t.slice():[t],o=0;o<n;++o)r.push(e);return r}var Bn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return e(e({},t),{table:function(n){var r=t.table(n),o=r.schema,i={},a=[];function u(t,n,r){var o=Xe(t),c=i[o]=i[o]||[],s=null==t?0:"string"==typeof t?1:t.length,l=0<n;return l=e(e({},r),{name:l?"".concat(o,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:l,keyTail:n,keyLength:s,extractKey:Qe(t),unique:!l&&r.unique}),c.push(l),l.isPrimaryKey||a.push(l),1<s&&u(2===s?t[0]:t.slice(0,s-1),n+1,r),c.sort((function(t,e){return t.keyTail-e.keyTail})),l}n=u(o.primaryKey.keyPath,0,o.primaryKey),i[":id"]=[n];for(var c=0,s=o.indexes;c<s.length;c++){var l=s[c];u(l.keyPath,0,l)}function f(n){var r,o=n.query.index;return o.isVirtual?e(e({},n),{query:{index:o.lowLevelIndex,range:(r=n.query.range,o=o.keyTail,{type:1===r.type?2:r.type,lower:Kn(r.lower,r.lowerOpen?t.MAX_KEY:t.MIN_KEY,o),lowerOpen:!0,upper:Kn(r.upper,r.upperOpen?t.MIN_KEY:t.MAX_KEY,o),upperOpen:!0})}}):n}return e(e({},r),{schema:e(e({},o),{primaryKey:n,indexes:a,getIndexByKeyPath:function(t){return(t=i[Xe(t)])&&t[0]}}),count:function(t){return r.count(f(t))},query:function(t){return r.query(f(t))},openCursor:function(e){var n=e.query.index,o=n.keyTail,i=n.isVirtual,a=n.keyLength;return i?r.openCursor(f(e)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Kn(r,e.reverse?t.MAX_KEY:t.MIN_KEY,o)):e.unique?n.continue(n.key.slice(0,a).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Kn(e,t.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===a?t[0]:t.slice(0,a)}},value:{get:function(){return n.value}}})}(n)})):r.openCursor(e)}})}})}};function Dn(t,e,n,r){return n=n||{},r=r||"",i(t).forEach((function(o){var i,a,u;l(e,o)?(i=t[o],a=e[o],"object"==typeof i&&"object"==typeof a&&i&&a?(u=I(i))!==I(a)?n[r+o]=e[o]:"Object"===u?Dn(i,a,n,r+o+"."):i!==a&&(n[r+o]=e[o]):i!==a&&(n[r+o]=e[o])):n[r+o]=void 0})),i(e).forEach((function(o){l(t,o)||(n[r+o]=e[o])})),n}function qn(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Nn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return e(e({},t),{table:function(n){var o=t.table(n),i=o.schema.primaryKey;return e(e({},o),{mutate:function(t){var a=gt.trans,u=a.table(n).hook,c=u.deleting,s=u.creating,f=u.updating;switch(t.type){case"add":if(s.fire===W)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"put":if(s.fire===W&&f.fire===W)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"delete":if(c.fire===W)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"deleteRange":if(c.fire===W)break;return a._promise("readwrite",(function(){return function t(n,r,a){return o.query({trans:n,values:!1,query:{index:i,range:r},limit:a}).then((function(o){var i=o.result;return h({type:"delete",keys:i,trans:n}).then((function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):i.length<a?{failures:[],numFailures:0,lastResult:void 0}:t(n,e(e({},r),{lower:i[i.length-1],lowerOpen:!0}),a)}))}))}(t.trans,t.range,1e4)}),!0)}return o.mutate(t);function h(t){var n,a,u,h=gt.trans,d=t.keys||qn(i,t);if(!d)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?e(e({},t),{keys:d}):e({},t)).type&&(t.values=r([],t.values,!0)),t.keys&&(t.keys=r([],t.keys,!0)),n=o,u=d,("add"===(a=t).type?Promise.resolve([]):n.getMany({trans:a.trans,keys:u,cache:"immutable"})).then((function(e){var n=d.map((function(n,r){var o,a,u,d=e[r],p={onerror:null,onsuccess:null};return"delete"===t.type?c.fire.call(p,n,d,h):"add"===t.type||void 0===d?(o=s.fire.call(p,n,t.values[r],h),null==n&&null!=o&&(t.keys[r]=n=o,i.outbound||_(t.values[r],i.keyPath,n))):(o=Dn(d,t.values[r]),(a=f.fire.call(p,o,n,d,h))&&(u=t.values[r],Object.keys(a).forEach((function(t){l(u,t)?u[t]=a[t]:_(u,t,a[t])})))),p}));return o.mutate(t).then((function(r){for(var o=r.failures,i=r.results,a=r.numFailures,u=(r=r.lastResult,0);u<d.length;++u){var c=(i||d)[u],s=n[u];null==c?s.onerror&&s.onerror(o[u]):s.onsuccess&&s.onsuccess("put"===t.type&&e[u]?t.values[u]:c)}return{failures:o,results:i,numFailures:a,lastResult:r}})).catch((function(t){return n.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}}})}})}};function Fn(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var r=[],o=0,i=0;o<e.keys.length&&i<t.length;++o)0===se(e.keys[o],t[i])&&(r.push(n?A(e.values[o]):e.values[o]),++i);return r.length===t.length?r:null}catch(t){return null}}var Mn={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var r=t.table(n);return e(e({},r),{getMany:function(t){if(!t.cache)return r.getMany(t);var e=Fn(t.keys,t.trans._cache,"clone"===t.cache);return e?_t.resolve(e):r.getMany(t).then((function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?A(e):e},e}))},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),r.mutate(t)}})}}}};function Rn(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function zn(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gn={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,r=new mn(t.MIN_KEY,t.MAX_KEY);return e(e({},t),{transaction:function(e,n,r){if(gt.subscr&&"readonly"!==n)throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(gt.querier));return t.transaction(e,n,r)},table:function(o){var u=t.table(o),c=u.schema,s=c.primaryKey,l=c.indexes,f=s.extractKey,h=s.outbound,d=s.autoIncrement&&l.filter((function(t){return t.compound&&t.keyPath.includes(s.keyPath)})),p=e(e({},u),{mutate:function(t){function e(t){return t="idb://".concat(n,"/").concat(o,"/").concat(t),p[t]||(p[t]=new mn)}var i,l,f,h=t.trans,p=t.mutatedParts||(t.mutatedParts={}),y=e(""),v=e(":dels"),m=t.type,g="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[qn(s,t).filter((function(t){return t})),t.values]:[],b=g[0],w=g[1];return g=t.trans._cache,a(b)?(y.addKeys(b),(g="delete"===m||b.length===w.length?Fn(b,g):null)||v.addKeys(b),(g||w)&&(i=e,l=g,f=w,c.indexes.forEach((function(t){var e=i(t.name||"");function n(e){return null!=e?t.extractKey(e):null}function r(n){return t.multiEntry&&a(n)?n.forEach((function(t){return e.addKey(t)})):e.addKey(n)}(l||f).forEach((function(t,e){var o=l&&n(l[e]);0!==se(o,e=f&&n(f[e]))&&(null!=o&&r(o),null!=e&&r(e))}))})))):b?(w={from:b.lower,to:b.upper},v.add(w),y.add(w)):(y.add(r),v.add(r),c.indexes.forEach((function(t){return e(t.name).add(r)}))),u.mutate(t).then((function(n){return!b||"add"!==t.type&&"put"!==t.type||(y.addKeys(n.results),d&&d.forEach((function(r){var o=t.values.map((function(t){return r.extractKey(t)})),i=r.keyPath.findIndex((function(t){return t===s.keyPath}));n.results.forEach((function(t){return o[i]=t})),e(r.name).addKeys(o)}))),h.mutatedParts=En(h.mutatedParts||{},p),n}))}}),y=(l=function(e){e=(n=e.query).index;var n=n.range;return[e,new mn(null!==(e=n.lower)&&void 0!==e?e:t.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:t.MAX_KEY)]},{get:function(t){return[s,new mn(t.key)]},getMany:function(t){return[s,(new mn).addKeys(t.keys)]},count:l,query:l,openCursor:l});return i(y).forEach((function(t){p[t]=function(i){var a=!!(p=gt.subscr),c=Rn(gt,u)&&zn(t,i)?i.obsSet={}:p;if(a){var s=function(t){return t="idb://".concat(n,"/").concat(o,"/").concat(t),c[t]||(c[t]=new mn)},l=s(""),d=s(":dels"),p=(a=(p=y[t](i))[0],p[1]);if(("query"===t&&a.isPrimaryKey&&!i.values?d:s(a.name||"")).add(p),!a.isPrimaryKey){if("count"!==t){var v="query"===t&&h&&i.values&&u.query(e(e({},i),{values:!1}));return u[t].apply(this,arguments).then((function(e){if("query"===t){if(h&&i.values)return v.then((function(t){return t=t.result,l.addKeys(t),e}));var n=i.values?e.result.map(f):e.result;(i.values?l:d).addKeys(n)}else if("openCursor"===t){var r=e,o=i.values;return r&&Object.create(r,{key:{get:function(){return d.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var t=r.primaryKey;return d.addKey(t),t}},value:{get:function(){return o&&l.addKey(r.primaryKey),r.value}}})}return e}))}d.add(r)}}return u[t].apply(this,arguments)}})),p}})}};function Un(t,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===o?null:(n=e({},n),a(n.keys)&&(n.keys=n.keys.filter((function(t,e){return!(e in r.failures)}))),"values"in n&&a(n.values)&&(n.values=n.values.filter((function(t,e){return!(e in r.failures)}))),n)}function Vn(t,e){return n=t,(void 0===(r=e).lower||(r.lowerOpen?0<se(n,r.lower):0<=se(n,r.lower)))&&(void 0===e.upper||(e.upperOpen?se(t,e.upper)<0:se(t,e.upper)<=0));var n,r}function Yn(t,e,n,r,o,i){if(!n||0===n.length)return t;var u=e.query.index,c=u.multiEntry,s=e.query.range,l=r.schema.primaryKey.extractKey,f=u.extractKey,h=(u.lowLevelIndex||u).extractKey;return n=n.reduce((function(t,n){var r=t,o=[];if("add"===n.type||"put"===n.type)for(var i=new mn,u=n.values.length-1;0<=u;--u){var h,d=n.values[u],p=l(d);i.hasKey(p)||(h=f(d),(c&&a(h)?h.some((function(t){return Vn(t,s)})):Vn(h,s))&&(i.addKey(p),o.push(d)))}switch(n.type){case"add":r=t.concat(e.values?o:o.map((function(t){return l(t)})));break;case"put":var y=(new mn).addKeys(n.values.map((function(t){return l(t)})));r=t.filter((function(t){return!y.hasKey(e.values?l(t):t)})).concat(e.values?o:o.map((function(t){return l(t)})));break;case"delete":var v=(new mn).addKeys(n.keys);r=t.filter((function(t){return!v.hasKey(e.values?l(t):t)}));break;case"deleteRange":var m=n.range;r=t.filter((function(t){return!Vn(l(t),m)}))}return r}),t),n===t?t:(n.sort((function(t,e){return se(h(t),h(e))||se(l(t),l(e))})),e.limit&&e.limit<1/0&&(n.length>e.limit?n.length=e.limit:t.length===e.limit&&n.length<e.limit&&(o.dirty=!0)),i?Object.freeze(n):n)}function Hn(t,e){return 0===se(t.lower,e.lower)&&0===se(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}var Qn={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name;return e(e({},t),{transaction:function(e,r,o){var i,a,u=t.transaction(e,r,o);return"readwrite"===r&&(a=(i=new AbortController).signal,o=function(o){return function(){if(i.abort(),"readwrite"===r){for(var a=new Set,c=0,s=e;c<s.length;c++){var l=s[c],f=Pn["idb://".concat(n,"/").concat(l)];if(f){var h=t.table(l),d=f.optimisticOps.filter((function(t){return t.trans===u}));if(u._explicit&&o&&u.mutatedParts)for(var p=0,y=Object.values(f.queries.query);p<y.length;p++)for(var v=0,m=(w=y[p]).slice();v<m.length;v++)On((x=m[v]).obsSet,u.mutatedParts)&&(K(w,x),x.subscribers.forEach((function(t){return a.add(t)})));else if(0<d.length){f.optimisticOps=f.optimisticOps.filter((function(t){return t.trans!==u}));for(var g=0,b=Object.values(f.queries.query);g<b.length;g++)for(var w,x,_,k=0,E=(w=b[g]).slice();k<E.length;k++)null!=(x=E[k]).res&&u.mutatedParts&&(o&&!x.dirty?(_=Object.isFrozen(x.res),_=Yn(x.res,x.req,d,h,x,_),x.dirty?(K(w,x),x.subscribers.forEach((function(t){return a.add(t)}))):_!==x.res&&(x.res=_,x.promise=_t.resolve({result:_}))):(x.dirty&&K(w,x),x.subscribers.forEach((function(t){return a.add(t)}))))}}}a.forEach((function(t){return t()}))}}},u.addEventListener("abort",o(!1),{signal:a}),u.addEventListener("error",o(!1),{signal:a}),u.addEventListener("complete",o(!0),{signal:a})),u},table:function(r){var o=t.table(r),i=o.schema.primaryKey;return e(e({},o),{mutate:function(t){var a=gt.trans;if(i.outbound||"disabled"===a.db._options.cache||a.explicit)return o.mutate(t);var u=Pn["idb://".concat(n,"/").concat(r)];return u?(a=o.mutate(t),"add"!==t.type&&"put"!==t.type||!(50<=t.values.length||qn(i,t).some((function(t){return null==t})))?(u.optimisticOps.push(t),t.mutatedParts&&An(t.mutatedParts),a.then((function(e){0<e.numFailures&&(K(u.optimisticOps,t),(e=Un(0,t,e))&&u.optimisticOps.push(e),t.mutatedParts&&An(t.mutatedParts))})),a.catch((function(){K(u.optimisticOps,t),t.mutatedParts&&An(t.mutatedParts)}))):a.then((function(n){var r=Un(0,e(e({},t),{values:t.values.map((function(t,r){var o;return _(t=null!==(o=i.keyPath)&&void 0!==o&&o.includes(".")?A(t):e({},t),i.keyPath,n.results[r]),t}))}),n);u.optimisticOps.push(r),queueMicrotask((function(){return t.mutatedParts&&An(t.mutatedParts)}))})),a):o.mutate(t)},query:function(t){if(!Rn(gt,o)||!zn("query",t))return o.query(t);var e="immutable"===(null===(u=gt.trans)||void 0===u?void 0:u.db._options.cache),i=(s=gt).requery,a=s.signal,u=function(t,e,n,r){var o=Pn["idb://".concat(t,"/").concat(e)];if(!o)return[];if(!(e=o.queries[n]))return[null,!1,o,null];var i=e[(r.query?r.query.index.name:null)||""];if(!i)return[null,!1,o,null];switch(n){case"query":var a=i.find((function(t){return t.req.limit===r.limit&&t.req.values===r.values&&Hn(t.req.query.range,r.query.range)}));return a?[a,!0,o,i]:[i.find((function(t){return("limit"in t.req?t.req.limit:1/0)>=r.limit&&(!r.values||t.req.values)&&function(t,e){return function(t,e,n,r){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;if(0===(e=se(t,e))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return e}(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&0<=function(t,e,n,r){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;if(0===(e=se(t,e))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return e}(t.upper,e.upper,t.upperOpen,e.upperOpen)}(t.req.query.range,r.query.range)})),!1,o,i];case"count":return a=i.find((function(t){return Hn(t.req.query.range,r.query.range)})),[a,!!a,o,i]}}(n,r,"query",t),c=u[0],s=u[1],l=u[2],f=u[3];return c&&s?c.obsSet=t.obsSet:(s=o.query(t).then((function(t){var n=t.result;if(c&&(c.res=n),e){for(var r=0,o=n.length;r<o;++r)Object.freeze(n[r]);Object.freeze(n)}else t.result=A(n);return t})).catch((function(t){return f&&c&&K(f,c),Promise.reject(t)})),c={obsSet:t.obsSet,promise:s,subscribers:new Set,type:"query",req:t,dirty:!1},f?f.push(c):(f=[c],(l=l||(Pn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[t.query.index.name||""]=f)),function(t,e,n,r){t.subscribers.add(n),r.addEventListener("abort",(function(){var r,o;t.subscribers.delete(n),0===t.subscribers.size&&(r=t,o=e,setTimeout((function(){0===r.subscribers.size&&K(o,r)}),3e3))}))}(c,f,i,a),c.promise.then((function(n){return{result:Yn(n.result,t,null==l?void 0:l.optimisticOps,o,c,e)}}))}})}})}};function Wn(t,e){return new Proxy(t,{get:function(t,n,r){return"db"===n?e:Reflect.get(t,n,r)}})}var $n=(Xn.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Y.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter((function(e){return e._cfg.version===t}))[0];return n||(n=new this.Version(t),e.push(n),e.sort(nn),n.stores({}),this._state.autoSchema=!1,n)},Xn.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||gt.letThrough||this._vip)?t():new _t((function(t,n){if(e._state.openComplete)return n(new Y.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new Y.DatabaseClosed);e.open().catch(W)}e._state.dbReadyPromise.then(t,n)})).then(t)},Xn.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,o=t.name;return o&&this.unuse({stack:e,name:o}),(t=this._middlewares[e]||(this._middlewares[e]=[])).push({stack:e,create:n,level:null==r?10:r,name:o}),t.sort((function(t,e){return t.level-e.level})),this},Xn.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return r?t.create!==r:!!n&&t.name!==n}))),this},Xn.prototype.open=function(){var t=this;return Qt(mt,(function(){return Tn(t)}))},Xn.prototype._close=function(){var t=this._state,e=ee.indexOf(this);if(0<=e&&ee.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new _t((function(e){t.dbReadyResolve=e})),t.openCanceller=new _t((function(e,n){t.cancelOpen=n})))},Xn.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen;t=this._state,e?(t.isBeingOpened&&t.cancelOpen(new Y.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new Y.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},Xn.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new _t((function(o,i){function a(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Kt((function(){var t,n,r;t=e._deps,n=e.name,r=t.indexedDB,t=t.IDBKeyRange,pn(r)||n===ne||dn(r,t).delete(n).catch(W),o()})),n.onerror=qe(i),n.onblocked=e._fireOnBlocked}if(n)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()}))},Xn.prototype.backendDB=function(){return this.idbdb},Xn.prototype.isOpen=function(){return null!==this.idbdb},Xn.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},Xn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Xn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xn.prototype,"tables",{get:function(){var t=this;return i(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!1,configurable:!0}),Xn.prototype.transaction=function(){var t=function(t,e,n){var r=arguments.length;if(r<2)throw new Y.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,O(o),n]}.apply(this,arguments);return this._transaction.apply(this,t)},Xn.prototype._transaction=function(t,e,n){var r=this,o=gt.trans;o&&o.db===this&&-1===t.indexOf("!")||(o=null);var i,a,u=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(a=e.map((function(t){if("string"!=typeof(t=t instanceof r.Table?t.name:t))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==t||t===re)i=re;else{if("rw"!=t&&t!=oe)throw new Y.InvalidArgument("Invalid transaction mode: "+t);i=oe}if(o){if(o.mode===re&&i===oe){if(!u)throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach((function(t){if(o&&-1===o.storeNames.indexOf(t)){if(!u)throw new Y.SubTransaction("Table "+t+" not included in parent transaction.");o=null}})),u&&o&&!o.active&&(o=null)}}catch(n){return o?o._promise(null,(function(t,e){e(n)})):Xt(n)}var c=function t(e,n,r,o,i){return _t.resolve().then((function(){var a=gt.transless||gt,u=e._createTransaction(n,r,e._dbSchema,o);if(u.explicit=!0,a={trans:u,transless:a},o)u.idbtrans=o.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(a){return a.name===U.InvalidState&&e.isOpen()&&0<--e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return t(e,n,r,null,i)}))):Xt(a)}var c,s=q(i);return s&&zt(),a=_t.follow((function(){var t;(c=i.call(u,u))&&(s?(t=Gt.bind(null,null),c.then(t,t)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=Cn(c)))}),a),(c&&"function"==typeof c.then?_t.resolve(c).then((function(t){return u.active?t:Xt(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):a.then((function(){return c}))).then((function(t){return o&&u._resolve(),u._completion.then((function(){return t}))})).catch((function(t){return u._reject(t),Xt(t)}))}))}.bind(null,this,i,a,o,n);return o?o._promise(i,c,"lock"):gt.trans?Qt(gt.transless,(function(){return r._whenReady(c)})):this._whenReady(c)},Xn.prototype.table=function(t){if(!l(this._allTables,t))throw new Y.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},Xn);function Xn(t,n){var r=this;this._middlewares={},this.verno=0;var o=Xn.dependencies;this._options=n=e({addons:Xn.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},o=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,u,c,s,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:W,dbReadyPromise:null,cancelOpen:W,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new _t((function(t){l.dbReadyResolve=t})),l.openCanceller=new _t((function(t,e){l.cancelOpen=e})),this._state=l,this.name=t,this.on=pe(this,"populate","blocked","versionchange","close",{ready:[rt,W]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(t){return function(e,n){Xn.vip((function(){var o,i=r._state;i.openComplete?(i.dbOpenError||_t.resolve().then(e),n&&t(e)):i.onReadyBeingFired?(i.onReadyBeingFired.push(e),n&&t(e)):(t(e),o=r,n||t((function t(){o.on.ready.unsubscribe(e),o.on.ready.unsubscribe(t)})))}))}})),this.Collection=(i=this,ye(Oe.prototype,(function(t,e){this.db=i;var n=ae,r=null;if(e)try{n=e()}catch(t){r=t}var o=t._ctx;t=(e=o.table).hook.reading.fire,this._ctx={table:e,index:o.index,isPrimKey:!o.index||e.schema.primKey.keyPath&&o.index===e.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:t!==$?t:null}}))),this.Table=(a=this,ye(he.prototype,(function(t,e,n){this.db=a,this._tx=n,this.name=t,this.schema=e,this.hook=a._allTables[t]?a._allTables[t].hook:pe(null,{creating:[Z,W],reading:[X,$],updating:[et,W],deleting:[tt,W]})}))),this.Transaction=(u=this,ye(ze.prototype,(function(t,e,n,r,o){var i=this;this.db=u,this.mode=t,this.storeNames=e,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pe(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _t((function(t,e){i._resolve=t,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),Xt(t)}))}))),this.Version=(c=this,ye(fn.prototype,(function(t){this.db=c,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(s=this,ye(Be.prototype,(function(t,e,n){if(this.db=s,this._ctx={table:t,index:":id"===e?null:e,or:n},this._cmp=this._ascending=se,this._descending=function(t,e){return se(e,t)},this._max=function(t,e){return 0<se(t,e)?t:e},this._min=function(t,e){return se(t,e)<0?t:e},this._IDBKeyRange=s._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI}))),this.on("versionchange",(function(t){0<t.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))})),this._maxKey=He(n.IDBKeyRange),this._createTransaction=function(t,e,n,o){return new r.Transaction(t,e,n,r._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(t){r.on("blocked").fire(t),ee.filter((function(t){return t.name===r.name&&t!==r&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(Mn),this.use(Qn),this.use(Gn),this.use(Bn),this.use(Nn);var f=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return Wn(r.table(t),f)};var o=Reflect.get(t,e,n);return o instanceof he?Wn(o,f):"tables"===e?o.map((function(t){return Wn(t,f)})):"_createTransaction"===e?function(){return Wn(o.apply(this,arguments),f)}:o}});this.vip=f,o.forEach((function(t){return t(r)}))}N="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var Jn,Zn=(tr.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},tr.prototype[N]=function(){return this},tr);function tr(t){this._subscribe=t}try{Jn={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(P){Jn={indexedDB:null,IDBKeyRange:null}}function er(t){var e,n=!1,r=new Zn((function(r){var o,i=q(t),a=!1,u={},c={},s={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),f&&Re.storagemutated.unsubscribe(d))}};r.start&&r.start(s);var f=!1,h=function(){return $t(p)},d=function(t){En(u,t),On(c,u)&&h()},p=function(){var s,p,y;!a&&Jn.indexedDB&&(u={},s={},o&&o.abort(),o=new AbortController,y=function(e){var n=Lt();try{i&&zt();var r=Rt(t,e);return r=i?r.finally(Gt):r}finally{n&&It()}}(p={subscr:s,signal:o.signal,requery:h,querier:t,trans:null}),Promise.resolve(y).then((function(t){n=!0,e=t,a||p.signal.aborted||(u={},function(t){for(var e in t)if(l(t,e))return;return 1}(c=s)||f||(Re(Fe,d),f=!0),$t((function(){return!a&&r.next&&r.next(t)})))}),(function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||$t((function(){a||r.error&&r.error(t)}))})))};return setTimeout(h,0),s}));return r.hasValue=function(){return n},r.getValue=function(){return e},r}var nr=$n;function rr(t){var e=ir;try{ir=!0,Re.storagemutated.fire(t),Ln(t,!0)}finally{ir=e}}f(nr,e(e({},Q),{delete:function(t){return new nr(t,{addons:[]}).delete()},exists:function(t){return new nr(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){try{return n=(e=nr.dependencies).indexedDB,e=e.IDBKeyRange,(pn(n)?Promise.resolve(n.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return t!==ne}))})):dn(n,e).toCollection().primaryKeys()).then(t)}catch(t){return Xt(new Y.MissingAPI)}var e,n},defineClass:function(){return function(t){u(this,t)}},ignoreTransaction:function(t){return gt.trans?Qt(gt.transless,t):t()},vip:yn,async:function(t){return function(){try{var e=Cn(t.apply(this,arguments));return e&&"function"==typeof e.then?e:_t.resolve(e)}catch(e){return Xt(e)}}},spawn:function(t,e,n){try{var r=Cn(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:_t.resolve(r)}catch(t){return Xt(t)}},currentTransaction:{get:function(){return gt.trans||null}},waitFor:function(t,e){return e=_t.resolve("function"==typeof t?nr.ignoreTransaction(t):t).timeout(e||6e4),gt.trans?gt.trans.waitFor(e):e},Promise:_t,debug:{get:function(){return ot},set:function(t){it(t)}},derive:p,extend:u,props:f,override:g,Events:pe,on:Re,liveQuery:er,extendObservabilitySet:En,getByKeyPath:x,setByKeyPath:_,delByKeyPath:function(t,e){"string"==typeof e?_(t,e,void 0):"length"in e&&[].map.call(e,(function(e){_(t,e,void 0)}))},shallowClone:k,deepClone:A,getObjectDiff:Dn,cmp:se,asap:w,minKey:-1/0,addons:[],connections:ee,errnames:U,dependencies:Jn,cache:Pn,semVer:"4.0.8",version:"4.0.8".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)}))})),nr.maxKey=He(nr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Re(Fe,(function(t){ir||(t=new CustomEvent(Me,{detail:t}),ir=!0,dispatchEvent(t),ir=!1)})),addEventListener(Me,(function(t){t=t.detail,ir||rr(t)})));var or,ir=!1,ar=function(){};return"undefined"!=typeof BroadcastChannel&&((ar=function(){(or=new BroadcastChannel(Me)).onmessage=function(t){return t.data&&rr(t.data)}})(),"function"==typeof or.unref&&or.unref(),Re(Fe,(function(t){ir||or.postMessage(t)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(t){if(!$n.disableBfCache&&t.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),null!=or&&or.close();for(var e=0,n=ee;e<n.length;e++)n[e].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(t){!$n.disableBfCache&&t.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),ar(),rr({all:new mn(-1/0,[[]])}))}))),_t.rejectionMapper=function(t,e){return!t||t instanceof M||t instanceof TypeError||t instanceof SyntaxError||!t.name||!H[t.name]?t:(e=new H[t.name](e||t.message,t),"stack"in t&&d(e,"stack",{get:function(){return this.inner.stack}}),e)},it(ot),e($n,Object.freeze({__proto__:null,Dexie:$n,liveQuery:er,Entity:ce,cmp:se,PropModSymbol:P,PropModification:ke,replacePrefix:function(t,e){return new ke({replacePrefix:[t,e]})},add:function(t){return new ke({add:t})},remove:function(t){return new ke({remove:t})},default:$n,RangeSet:mn,mergeRanges:bn,rangesOverlap:wn}),{default:$n}),$n}()},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],u=0;u<t.length;u++){var c=t[u],s=r.base?c[0]+r.base:c[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var h=n(f),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(d);else{var p=o(d,r);r.byIndex=u,e.splice(u,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var u=n(i[a]);e[u].references--}for(var c=r(t,o),s=0;s<i.length;s++){var l=n(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},659:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";var t=n(72),e=n.n(t),r=n(825),o=n.n(r),i=n(659),a=n.n(i),u=n(56),c=n.n(u),s=n(540),l=n.n(s),f=n(113),h=n.n(f),d=n(220),p={};p.styleTagTransform=h(),p.setAttributes=c(),p.insert=a().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=l(),e()(d.A,p),d.A&&d.A.locals&&d.A.locals;var y=n(782),v={};v.styleTagTransform=h(),v.setAttributes=c(),v.insert=a().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=l(),e()(y.A,v),y.A&&y.A.locals&&y.A.locals;var m=n(694),g={};g.styleTagTransform=h(),g.setAttributes=c(),g.insert=a().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=l(),e()(m.A,g),m.A&&m.A.locals&&m.A.locals;var b=n(277),w={};w.styleTagTransform=h(),w.setAttributes=c(),w.insert=a().bind(null,"head"),w.domAPI=o(),w.insertStyleElement=l(),e()(b.A,w),b.A&&b.A.locals&&b.A.locals;var x=n(902),_={};_.styleTagTransform=h(),_.setAttributes=c(),_.insert=a().bind(null,"head"),_.domAPI=o(),_.insertStyleElement=l(),e()(x.A,_),x.A&&x.A.locals&&x.A.locals;var k=n(503),E={};E.styleTagTransform=h(),E.setAttributes=c(),E.insert=a().bind(null,"head"),E.domAPI=o(),E.insertStyleElement=l(),e()(k.A,E),k.A&&k.A.locals&&k.A.locals;var O=n(105),P={};P.styleTagTransform=h(),P.setAttributes=c(),P.insert=a().bind(null,"head"),P.domAPI=o(),P.insertStyleElement=l(),e()(O.A,P),O.A&&O.A.locals&&O.A.locals;var S=n(108),j={};j.styleTagTransform=h(),j.setAttributes=c(),j.insert=a().bind(null,"head"),j.domAPI=o(),j.insertStyleElement=l(),e()(S.A,j),S.A&&S.A.locals&&S.A.locals;var A=document.getElementById("itemForm"),L=document.getElementById("itemsDiv"),I=document.getElementById("cancelButton"),T=document.getElementById("nameInput"),C=document.getElementById("nameError"),K=document.getElementById("priceInput"),B=document.getElementById("priceError"),D=document.getElementById("quantityUnitInput"),q=document.getElementById("sectionInput"),N=(document.getElementById("showItemsControl"),document.getElementById("toggleMessage"),document.getElementById("arrow"),document.getElementById("autoSort")),F=document.getElementById("hideChecked"),M=document.getElementById("sectionSort"),R=document.getElementById("stickyQuickSortFooter"),z=document.getElementById("quickSortDiv"),G=n(744);const U=Symbol.for("Dexie"),V=globalThis[U]||(globalThis[U]=G);if(G.semVer!==V.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${G.semVer} and ${V.semVer}`);const{liveQuery:Y,mergeRanges:H,rangesOverlap:Q,RangeSet:W,cmp:$,Entity:X,PropModSymbol:J,PropModification:Z,replacePrefix:tt,add:et,remove:nt}=V;function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(){ot=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:P(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&r.call(_,a)&&(w=_);var k=b.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==rt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?y:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(rt(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(O.prototype),s(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),s(k,c,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function it(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function at(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){it(i,r,o,a,u,"next",t)}function u(t){it(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){st(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t,e,n){return(e=function(t){var e=function(t){if("object"!=rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt=new V("pantry-pal");lt.version(1).stores({items:"++id, name, price, isPurchased"}),lt.version(2).stores({items:"++id, name, price, isPurchased, section, quantityUnit, createdAt, updatedAt"});var ft={stack:"dbcore",name:"timestampsMiddleware",create:function(t){return ct(ct({},t),{},{table:function(e){var n,r=t.table(e);return ct(ct({},r),{},{mutate:(n=at(ot().mark((function t(n){var o;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"items"===e&&(o=(new Date).toISOString(),"add"===n.type?n.values.forEach((function(t){t.createdAt=o,t.updatedAt=o})):"put"===n.type&&n.values.forEach((function(t){t.updatedAt=o}))),t.abrupt("return",r.mutate(n));case 2:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})})}})}},ht={stack:"dbcore",name:"timestampsMiddleware",create:function(t){return ct(ct({},t),{},{table:function(e){var n,r=t.table(e);return ct(ct({},r),{},{mutate:(n=at(ot().mark((function t(n){return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"items"===e&&"add"===n.type&&n.values.forEach((function(t){t.isPurchased=!1})),t.abrupt("return",r.mutate(n));case 2:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})})}})}};lt.use(ft),lt.use(ht);const dt=lt;function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(){yt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:P(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&r.call(_,a)&&(w=_);var k=b.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==pt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?y:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(pt(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(O.prototype),s(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),s(k,c,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function vt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}var mt=null,gt=function(){var t,e=(t=yt().mark((function t(){var e,n,r,o;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt.items.reverse().toArray();case 2:if(e=t.sent,r=xt(e,F,mt),n=r,M.checked?(n=_t(n),N.checked&&(sortedItem=kt(n))):N.checked&&(n=kt(n)),n.length){t.next=10;break}return L.innerHTML='\n    <div class="noItemsMessage">\n      <p>There are no items in the list</p>\n      <p>Click "Add New" above to add items to the list</p>\n    </div>\n    ',R.classList.add("closed"),t.abrupt("return");case 10:L.innerHTML=n.map((function(t){return'\n      <div class="item '.concat(t.isPurchased&&"purchased",'" id="item-').concat(t.id,'" role="listitem" aria-labelledby="item-name-').concat(t.id,'">\n        \n          <input\n           type="checkbox" \n           id="checkbox-').concat(t.id,'"\n           class="checkbox" \n           onchange="toggleItemPurchaseStatus(event, ').concat(t.id,')"\n           ').concat(t.isPurchased?"checked":"",'\n           aria-labelledby="item-name-').concat(t.id,'"\n           />\n\n        <div class="itemInfo">\n          <div class="itemNameContainer">\n            <div>\n              <p class="itemInfoHeading">Item</p>\n              <p class="itemNameText" id="item-name-').concat(t.id,'">').concat(t.name,'</p>\n            </div>\n            <p class="itemInfoHeading storeSection">').concat(t.section,'</p>\n          </div>\n\n          <div class="itemQuantityContainer">\n            <p class="itemInfoHeading">Quantity</p>\n            <p class="itemQuantityText" id="item-quantity-').concat(t.id,'">').concat(t.quantity," ").concat(t.quantityUnit,'</p>\n          </div>\n\n          <div class="itemPriceContainer">\n            <p class="itemInfoHeading">Est. Price</p>\n            <p class="itemPriceText" id="item-price-').concat(t.id,'">$ ').concat(Number(t.price).toFixed(2),' </p>\n          </div>\n\n        </div>\n\n        <button\n        onclick="removeItem(').concat(t.id,')"\n        class="deleteButton"\n        aria-label="Remove ').concat(t.name,'"\n        >\n        X\n        </button>\n      </div>\n    ')})).join(""),o=bt(e),R.classList.remove("closed"),z.innerHTML=Object.keys(o).sort().map((function(t){return'\n      <div class="itemGroupContainer" onclick="filterBySection(\''.concat(t,'\')">\n        <div class="itemGroup ').concat(t===mt?"selected":"","\n        ").concat(o[t].isPurchased===o[t].total?"completed":"",'\n        ">\n          <p class="inCartNum">').concat(o[t].isPurchased,'</p>\n          <p class="separator">/</p>\n          <p class="totalNum">').concat(o[t].total,'</p>\n        </div>\n        <p class="itemGroupName">').concat(wt(t),"</p>\n      </div>\n    ")})).join("");case 14:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){vt(i,r,o,a,u,"next",t)}function u(t){vt(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),bt=function(t){var e={};return t.forEach((function(t){var n=t.section||"Other";e[n]||(e[n]={total:0,isPurchased:0}),e[n].total+=1,t.isPurchased&&(e[n].isPurchased+=1)})),e},wt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},xt=function(t,e,n){var r=t;return e.checked&&(r=r.filter((function(t){return!t.isPurchased}))),n&&(r=r.filter((function(t){return"Other"===n?!t.section:t.section===n}))),r},_t=function(t){return t.sort((function(t,e){return t.section.localeCompare(e.section)}))},kt=function(t){return t.sort((function(t,e){return t.isPurchased-e.isPurchased}))};window.filterBySection=function(t){mt=mt===t?null:t,gt()};var Et=[{value:"",text:"Select store section"},{value:"bakery",text:"Bakery"},{value:"baking",text:"Baking Supplies"},{value:"beverages",text:"Beverages"},{value:"breakfast",text:"Breakfast Foods"},{value:"canned",text:"Canned Goods"},{value:"condiments",text:"Condiments & Sauces"},{value:"dairy",text:"Dairy"},{value:"deli",text:"Deli"},{value:"dry",text:"Dry Goods & Pasta"},{value:"ethnic",text:"Ethnic Foods"},{value:"frozen",text:"Frozen Foods"},{value:"health",text:"Health & Beauty"},{value:"household",text:"Household Supplies"},{value:"meat",text:"Meat & Poultry"},{value:"pet",text:"Pet Supplies"},{value:"produce",text:"Produce"},{value:"seafood",text:"Seafood"},{value:"snacks",text:"Snacks"},{value:"spices",text:"Spices & Seasonings"}],Ot=[{value:"",text:"select unit"},{value:"unit",text:"unit"},{value:"ounces",text:"ounces"},{value:"pounds",text:"pounds"},{value:"grams",text:"grams"},{value:"kilograms",text:"kilograms"},{value:"separator",text:"---------",disabled:!0},{value:"milliliters",text:"milliliters"},{value:"liters",text:"liters"},{value:"pints",text:"pints"},{value:"quarts",text:"quarts"},{value:"gallons",text:"gallons"},{value:"separator",text:"---------",disabled:!0},{value:"dozen",text:"dozen"},{value:"pack",text:"pack"},{value:"box",text:"box"},{value:"bag",text:"bag"}],Pt=function(t){return t.map((function(t){return"separator"===t.value?'<option value="'.concat(t.value,'" ').concat(t.disabled?"disabled":"",">").concat(t.text,"</option>"):'<option value="'.concat(t.value,'">').concat(t.text,"</option>")})).join("")};function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function jt(){jt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:P(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&r.call(_,a)&&(w=_);var k=b.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==St(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?y:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(St(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(O.prototype),s(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),s(k,c,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function At(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}var Lt=function(){T.setCustomValidity(""),C.textContent=""},It=function(){K.setCustomValidity(""),B.textContent=""};function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function Ct(){Ct=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:P(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&r.call(_,a)&&(w=_);var k=b.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Tt(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?y:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Tt(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(O.prototype),s(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),s(k,c,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Kt(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Bt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Kt(i,r,o,a,u,"next",t)}function u(t){Kt(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",(function(){D&&(D.innerHTML=Pt(Ot)),q&&(q.innerHTML=Pt(Et))})),A.onsubmit=function(){var t,e=(t=jt().mark((function t(e){var n,r,o,i,a,u;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),n=!0,T.validity.valid||(T.setCustomValidity("Please enter an item name"),C.textContent=T.validationMessage,n=!1),K.validity.valid||(K.setCustomValidity("Please enter a valid price (e.g. $1.99)"),B.textContent=K.validationMessage,n=!1),n){t.next=6;break}return t.abrupt("return");case 6:return r=T.value,o=document.getElementById("quantityInput").value,i=D.value,a=K.value,u=q.value,t.next=13,dt.items.add({name:r,quantity:o,quantityUnit:i,price:a,section:u});case 13:return t.next=15,gt();case 15:A.reset(),document.getElementById("nameInput").focus();case 17:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){At(i,r,o,a,u,"next",t)}function u(t){At(i,r,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),I.addEventListener("click",(function(){Lt(),It(),A.reset(),T.focus()})),T.addEventListener("input",Lt),K.addEventListener("input",It);var Dt=function(){var t=Bt(Ct().mark((function t(e,n){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt.items.update(n,{isPurchased:!!e.target.checked});case 2:return t.next=4,gt();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),qt=function(){var t=Bt(Ct().mark((function t(e){var n;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!mt){t.next=9;break}return console.log("removeItems clause hit"),t.next=4,dt.items.get(e);case 4:return n=t.sent,t.next=7,dt.items.where("section").equals(n.section).count();case 7:1===t.sent&&n.section===mt&&(mt=null);case 9:return t.next=11,dt.items.delete(e);case 11:return t.next=13,gt();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Nt=document.getElementById("modal"),Ft=document.getElementById("openModalButton"),Mt='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',Rt=Nt.querySelectorAll(Mt)[0],zt=Nt.querySelectorAll(Mt),Gt=document.getElementById("closeModal"),Ut=zt[zt.length-1],Vt=function(t){document.querySelectorAll("body > *:not(.modal)").forEach((function(e){e.classList.toggle("inert",t)}))},Yt=function(){Nt.classList.remove("open"),Nt.style.display="none",Nt.setAttribute("aria-hidden","true"),Vt(!1),Ft.focus(),A.reset()};Nt.addEventListener("keydown",(function(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===Rt&&(Ut.focus(),t.preventDefault()):document.activeElement===Ut&&(Rt.focus(),t.preventDefault()))})),Ft.addEventListener("click",(function(){Nt.classList.add("open"),Nt.style.display="block",Nt.setAttribute("aria-hidden","false"),Vt(!0),Rt.focus()})),Gt.addEventListener("click",Yt);var Ht=document.getElementById("optionsModal"),Qt=document.getElementById("openOptionsModalButton"),Wt='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',$t=Ht.querySelectorAll(Wt)[0],Xt=Ht.querySelectorAll(Wt),Jt=document.getElementById("closeOptionsModal"),Zt=Xt[Xt.length-1],te=function(){Ht.classList.remove("open"),Ht.style.width=0,Ht.setAttribute("aria-hidden","true"),Qt.focus()};function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ne(){ne=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new L(r||[]);return o(a,"_invoke",{value:P(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&r.call(_,a)&&(w=_);var k=b.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ee(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=S(u,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var s=f(e,n,r);if("normal"===s.type){if(o=r.done?y:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function S(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ee(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(O.prototype),s(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),s(k,c,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function re(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function oe(){var t;return t=ne().mark((function t(){var e;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt.table("items").toArray();case 2:if(e=t.sent){t.next=5;break}throw new Error("No shopping list items found");case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})),oe=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){re(i,r,o,a,u,"next",t)}function u(t){re(i,r,o,a,u,"throw",t)}a(void 0)}))},oe.apply(this,arguments)}Ht.addEventListener("keydown",(function(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===$t&&(Zt.focus(),t.preventDefault()):document.activeElement===Zt&&($t.focus(),t.preventDefault()))})),Qt.addEventListener("click",(function(){Ht.classList.add("open"),Ht.style.width="60%",Ht.setAttribute("aria-hidden","false"),$t.focus()})),Jt.addEventListener("click",te),N.addEventListener("change",gt),F.addEventListener("change",gt),M.addEventListener("change",gt),document.getElementById("backupData").addEventListener("click",(function(){return function(){return oe.apply(this,arguments)}().then((function(t){!function(t){var e=JSON.stringify(t),n=new Blob([e],{type:"application/json "}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="backup.json",o.click()}(t)})).catch((function(t){return console.warn(t)}))})),window.onload=gt,window.addEventListener("click",(function(t){t.target===modal&&Yt()})),window.addEventListener("keydown",(function(t){"Escape"===t.key&&(Nt.classList.contains("open")?Yt():te())})),window.removeItem=qt,window.toggleItemPurchaseStatus=Dt})()})();