<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pantry Pal</title>
    <link rel="stylesheet" href="./assets/favicon.png" />
    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="./styles/nav.css" />
    <link rel="stylesheet" href="./styles/modal.css" />
    <link rel="stylesheet" href="./styles/form.css" />
    <link rel="stylesheet" href="./styles/buttons.css" />
    <link rel="stylesheet" href="./styles/items.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <script src="./dexie.min.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js');
        });
      }
    </script>
  </head>
  <body>
    <nav>
      <p>Pantry Pal</p>
    </nav>
    <div class="container">
        <!-- MODAL TRIGGER -->
      <button id="openModalButton" aria-haspopup="dialog" aria-controls="modal">
        <div class="plus"></div>
        <p>Add New Item</p>
      </button>

      <!-- MODAL STRUCTURE -->
      <div id="modal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
          <button id="closeModal" class="close" aria-label="Close">&times;</button>
          <h2 id="modalTitle">Add New Item</h2>
          <form id="itemForm" novalidate>
            <label for="nameInput">
              Item
              <input
                type="text"
                id="nameInput"
                placeholder="Grocery Item"
                aria-describedby="nameError"
                required
              />
              <span class="error" id="nameError"></span>
            </label>

            <label for="quantityInput">
              Quantity
              <input type="number" id="quantityInput" value="1" />
            </label>

            <label for="priceInput">
              Price
              <input
                type="text"
                id="priceInput"
                placeholder="1.99"
                pattern="^\d+(\.\d{1,2})?$"
                aria-describedby="priceError"
              />
              <span class="error" id="priceError"></span>
            </label>

            <div class="formActionsDiv">
              <button type="submit" id="addItemButton">Add Item</button>
              <button id="cancelButton" type="button">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    </div>

    <!-- SHOPPING ITEMS LIST -->
    <div id="itemsDiv"></div>
    <!-- TOTAL PRICE OF LIST -->
    <div class="stickyPriceFooter">
      <!-- ITEMS CONTROLS -->
      <div id="itemsControl" class="itemsControl">
        <div class="itemsControlButtons">
          <!-- TODO: Reset and Delete buttons -->
          <!-- <button id="resetChecked">Reset Checked</button>
          <button id="deleteChecked">Delete Checked</button> -->
        </div>
        <div class="filters">
          <label class="itemsControlInput">
            Auto Sort
            <input type="checkbox" id="autoSort" class="checkbox" />
          </label>
          <label class="itemsControlInput">
            Hide Checked
            <input type="checkbox" id="hideChecked" class="checkbox" />
          </label>
          <!-- TODO: Sort by Section -->
          <!-- <label>
            Sort by Section
            <input type="checkbox" id="sectionSort" class="checkbox" />
          </label> -->
        </div>
      </div>
      <div id="showItemsControl" class="showItemsControl">
        <p id="toggleMessage">Hide Filters</p>
        <div id="arrow" class="arrow-down"></div>
      </div>
      <div class="divider"></div>
      <div id="totalPriceDiv">
        <p>Estimated Total Price</p>
        <p id="priceAmount"></p>
      </div>
    </div>
    <script type="module" src="./index.js"></script>
    <script type="module" src="./modules/db.js"></script>
    <script type="module" src="./modules/domElements.js"></script>
    <script type="module" src="./modules/populateItems.js"></script>
    <script type="module" src="./modules/modal.js"></script>
    <script type="module" src="./modules/form.js"></script>
    <script type="module" src="./modules/itemsControl.js"></script>
  </body>
</html>
